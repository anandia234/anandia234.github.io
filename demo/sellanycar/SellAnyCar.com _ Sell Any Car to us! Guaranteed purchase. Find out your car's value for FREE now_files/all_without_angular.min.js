function clone(a){if(!a)return a;var b,c=[Number,String,Boolean];if(c.forEach(function(c){a instanceof c&&(b=c(a))}),"undefined"==typeof b)if("[object Array]"===Object.prototype.toString.call(a))b=[],a.forEach(function(a,c,d){b[c]=clone(a)});else if("object"==typeof a)if(a.nodeType&&"function"==typeof a.cloneNode)var b=a.cloneNode(!0);else if(a.prototype)b=a;else if(a instanceof Date)b=new Date(a);else{b={};for(var d in a)b[d]=clone(a[d])}else b=a;return b}var sacConfig={apiUrl:"https://uae.sellanycar.com/api",httpTimeout:3e3};!function(a){"use strict";var b=function(b,c,d){var e,f=a.document,g=f.createElement("link");if(c)e=c;else{var h=(f.body||f.getElementsByTagName("head")[0]).childNodes;e=h[h.length-1]}var i=f.styleSheets;g.rel="stylesheet",g.href=b,g.media="only x",e.parentNode.insertBefore(g,c?e:e.nextSibling);var j=function(a){for(var b=g.href,c=i.length;c--;)if(i[c].href===b)return a();setTimeout(function(){j(a)})};return g.onloadcssdefined=j,j(function(){g.media=d||"all"}),g};"undefined"!=typeof module?module.exports=b:a.loadCSS=b}("undefined"!=typeof global?global:this),window.isMobile=function(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a},function(a,b,c){"use strict";function d(a){var c=[];return i(c,b.noop).chars(a),c.join("")}function e(a,c){var d,e={},f=a.split(",");for(d=0;d<f.length;d++)e[c?b.lowercase(f[d]):f[d]]=!0;return e}function f(a,c){function d(a,d,f,h){if(d=b.lowercase(d),w[d])for(;s.last()&&x[s.last()];)e("",s.last());v[d]&&s.last()==d&&e("",d),(h=u[d]||!!h)||s.push(d);var i={};f.replace(m,function(a,b,c,d,e){i[b]=g(c||d||e||"")}),c.start&&c.start(d,i,h)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=s.length-1;0<=f&&s[f]!=d;f--);if(0<=f){for(e=s.length-1;e>=f;e--)c.end&&c.end(s[e]);s.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,h,i,s=[],t=a;for(s.last=function(){return s[s.length-1]};a;){if(i="",h=!0,s.last()&&y[s.last()]?(a=a.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+s.last()+"[^>]*>","i"),function(a,b){return b=b.replace(p,"$1").replace(r,"$1"),c.chars&&c.chars(g(b)),""}),e("",s.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),0<=f&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),h=!1)):q.test(a)?(f=a.match(q))&&(a=a.replace(f[0],""),h=!1):o.test(a)?(f=a.match(l))&&(a=a.substring(f[0].length),f[0].replace(l,e),h=!1):n.test(a)&&((f=a.match(k))?(f[4]&&(a=a.substring(f[0].length),f[0].replace(k,d)),h=!1):(i+="<",a=a.substring(1))),h&&(f=a.indexOf("<"),i+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(g(i)))),a==t)throw j("badparse",a);t=a}e()}function g(a){return a?(C.innerHTML=a.replace(/</g,"&lt;"),C.textContent):""}function h(a){return a.replace(/&/g,"&amp;").replace(s,function(a){var b=a.charCodeAt(0);return a=a.charCodeAt(1),"&#"+(1024*(b-55296)+(a-56320)+65536)+";"}).replace(t,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&y[a]&&(d=a),d||!0!==z[a]||(e("<"),e(a),b.forEach(f,function(d,f){var g=b.lowercase(f),i="img"===a&&"src"===g||"background"===g;!0!==B[g]||!0===A[g]&&!c(d,i)||(e(" "),e(f),e('="'),e(h(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||!0!==z[a]||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(h(a))}}}var j=b.$$minErr("$sanitize"),k=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,l=/^<\/\s*([\w:-]+)[^>]*>/,m=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,n=/^</,o=/^<\//,p=/\x3c!--(.*?)--\x3e/g,q=/<!DOCTYPE([^>]*?)>/i,r=/<!\[CDATA\[(.*?)]]\x3e/g,s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,t=/([^\#-~| |!])/g,u=e("area,br,col,hr,img,wbr");a=e("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),c=e("rp,rt");var v=b.extend({},c,a),w=b.extend({},a,e("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),x=b.extend({},c,e("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));a=e("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use");var y=e("script,style"),z=b.extend({},u,w,x,v,a),A=e("background,cite,href,longdesc,src,usemap,xlink:href");a=e("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),c=e("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0);var B=b.extend({},A,c,a),C=document.createElement("pre");b.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return f(b,i(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,e=/^mailto:/i;return function(f,g){function h(a){a&&n.push(d(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&n.push('target="',g,'" '),n.push('href="',a.replace(/"/g,"&quot;"),'">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]||j[4]||(k=(j[3]?"http://":"mailto:")+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(e,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return N(new(N(function(){},{prototype:a})),b)}function e(a){return M(arguments,function(b){b!==a&&M(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var b=[];return M(a,function(a,c){b.push(c)}),b}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=d<0?Math.ceil(d):Math.floor(d),d<0&&(d+=c);d<c;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return N({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return M(a,function(a){c[a]=b[a]}),c}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return M(c,function(c){c in a&&(b[c]=a[c])}),b}function m(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a)h(c,d)==-1&&(b[d]=a[d]);return b}function n(a,b){var c=L(a),d=c?[]:{};return M(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function o(a,b){var c=L(a)?[]:{};return M(a,function(a,d){c[d]=b(a,d)}),c}function p(a,b){var d=1,f=2,i={},j=[],k=i,l=N(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(s[c]!==f){if(r.push(c),s[c]===d)throw r.splice(0,h(r,c)),new Error("Cyclic dependency: "+r.join(" -> "));if(s[c]=d,J(a))q.push(c,[function(){return b.get(a)}],j);else{var e=b.annotate(a);M(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a)}),q.push(c,a,e)}r.pop(),s[c]=f}}function o(a){return K(a)&&a.then&&a.$$promises}if(!K(i))throw new Error("'invocables' must be an object");var p=g(i||{}),q=[],r=[],s={};return M(i,n),i=r=s=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),r.$$values=t,r.$$promises=r.$$promises||!0,delete r.$$inheritedValues,n.resolve(t))}function i(a){r.$$failure=a,n.reject(a)}function j(c,e,f){function j(a){l.reject(a),i(a)}function k(){if(!H(r.$$failure))try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h()},j)}catch(a){j(a)}}var l=a.defer(),m=0;M(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k()},j))}),m||k(),s[c]=l.promise}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!K(d))throw new Error("'locals' must be an object")}else d=k;if(f){if(!o(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=l;var n=a.defer(),r=n.promise,s=r.$$promises={},t=N({},d),u=1+q.length/3,v=!1;if(H(f.$$failure))return i(f.$$failure),r;f.$$inheritedValues&&e(t,m(f.$$inheritedValues,p)),N(s,f.$$promises),f.$$values?(v=e(t,m(f.$$values,p)),r.$$inheritedValues=m(f.$$values,p),h()):(f.$$inheritedValues&&(r.$$inheritedValues=m(f.$$inheritedValues,p)),f.then(h,i));for(var w=0,x=q.length;w<x;w+=3)d.hasOwnProperty(q[w])?h():j(q[w],q[w+1],q[w+2]);return r}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function q(a,b,c){this.fromConfig=function(a,b,c){return H(a.template)?this.fromString(a.template,b):H(a.templateUrl)?this.fromUrl(a.templateUrl,b):H(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return I(a)?a(b):a},this.fromUrl=function(c,d){return I(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function r(a,b,e){function f(b,c,d,e){if(q.push(b),o[b])return o[b];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(p[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");return p[b]=new P.Param(b,c,d,e),p[b]}function g(a,b,c,d){var e=["",""],f=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return f;switch(c){case!1:e=["(",")"+(d?"?":"")];break;case!0:e=["?(",")?"];break;default:e=["("+c+"|",")?"]}return f+e[0]+b+e[1]}function h(e,f){var g,h,i,j,k;return g=e[2]||e[3],k=b.params[g],i=a.substring(m,e.index),h=f?e[4]:e[4]||("*"==e[1]?".*":null),j=P.type(h||"string")||d(P.type("string"),{pattern:new RegExp(h,b.caseInsensitive?"i":c)}),{id:g,regexp:h,segment:i,type:j,cfg:k}}b=N({params:{}},K(b)?b:{});var i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new P.ParamSet,q=[];this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));)s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash,s.isOptional),n.push(r.segment),m=j.lastIndex;t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0)for(m=0;i=k.exec(v);)r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex}else this.sourcePath=a,this.sourceSearch="";l+=g(t)+(b.strict===!1?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q}function s(a){N(this,a)}function t(){function a(a){return null!=a?a.toString().replace(/\//g,"%2F"):a}function e(a){return null!=a?a.toString().replace(/%2F/g,"/"):a}function f(){return{strict:p,caseInsensitive:m}}function i(a){return I(a)||L(a)&&I(a[a.length-1])}function j(){for(;w.length;){var a=w.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");b.extend(u[a.name],l.invoke(a.def))}}function k(a){N(this,a||{})}P=this;var l,m=!1,p=!0,q=!1,u={},v=!0,w=[],x={string:{encode:a,decode:e,is:function(a){return null==a||!H(a)||"string"==typeof a},pattern:/[^/]*/},"int":{encode:a,decode:function(a){return parseInt(a,10)},is:function(a){return H(a)&&this.decode(a.toString())===a},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0!==parseInt(a,10)},is:function(a){return a===!0||a===!1},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):c},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^/]*/},any:{encode:b.identity,decode:b.identity,equals:b.equals,pattern:/.*/}};t.$$getDefaultValue=function(a){if(!i(a.value))return a.value;if(!l)throw new Error("Injectable functions cannot be called at configuration time");return l.invoke(a.value)},this.caseInsensitive=function(a){return H(a)&&(m=a),m},this.strictMode=function(a){return H(a)&&(p=a),p},this.defaultSquashPolicy=function(a){if(!H(a))return q;if(a!==!0&&a!==!1&&!J(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return q=a,a},this.compile=function(a,b){return new r(a,N(f(),b))},this.isMatcher=function(a){if(!K(a))return!1;var b=!0;return M(r.prototype,function(c,d){I(c)&&(b=b&&H(a[d])&&I(a[d]))}),b},this.type=function(a,b,c){if(!H(b))return u[a];if(u.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return u[a]=new s(N({name:a},b)),c&&(w.push({name:a,def:c}),v||j()),this},M(x,function(a,b){u[b]=new s(N({name:b},a))}),u=d(u,{}),this.$get=["$injector",function(a){return l=a,v=!1,j(),M(x,function(a,b){u[b]||(u[b]=new s(a))}),this}],this.Param=function(a,b,d,e){function f(a){var b=K(a)?g(a):[],c=h(b,"value")===-1&&h(b,"type")===-1&&h(b,"squash")===-1&&h(b,"array")===-1;return c&&(a={value:a}),a.$$fn=i(a.value)?a.value:function(){return a.value},a}function j(b,c,d){if(b.type&&c)throw new Error("Param '"+a+"' has two type configurations.");return c?c:b.type?b.type instanceof s?b.type:new s(b.type):"config"===d?u.any:u.string}function k(){var b={array:"search"===e&&"auto"},c=a.match(/\[\]$/)?{array:!0}:{};return N(b,c,d).array}function m(a,b){var c=a.squash;if(!b||c===!1)return!1;if(!H(c)||null==c)return q;if(c===!0||J(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}function p(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=L(a.replace)?a.replace:[],J(e)&&f.push({from:e,to:c}),g=o(f,function(a){return a.from}),n(i,function(a){return h(g,a.from)===-1}).concat(f)}function r(){if(!l)throw new Error("Injectable functions cannot be called at configuration time");var a=l.invoke(d.$$fn);if(null!==a&&a!==c&&!w.type.is(a))throw new Error("Default value ("+a+") for parameter '"+w.id+"' is not an instance of Type ("+w.type.name+")");return a}function t(a){function b(a){return function(b){return b.from===a}}function c(a){var c=o(n(w.replace,b(a)),function(a){return a.to});return c.length?c[0]:a}return a=c(a),H(a)?w.type.$normalize(a):r()}function v(){return"{Param:"+a+" "+b+" squash: '"+z+"' optional: "+y+"}"}var w=this;d=f(d),b=j(d,b,e);var x=k();b=x?b.$asArray(x,"search"===e):b,"string"!==b.name||x||"path"!==e||d.value!==c||(d.value="");var y=d.value!==c,z=m(d,y),A=p(d,x,y,z);N(this,{id:a,type:b,location:e,array:x,squash:z,replace:A,isOptional:y,value:t,dynamic:c,config:d,toString:v})},k.prototype={$$new:function(){return d(this,N(new k,{$$parent:this}))},$$keys:function(){for(var a=[],b=[],c=this,d=g(k.prototype);c;)b.push(c),c=c.$$parent;return b.reverse(),M(b,function(b){M(g(b),function(b){h(a,b)===-1&&h(d,b)===-1&&a.push(b)})}),a},$$values:function(a){var b={},c=this;return M(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d])}),b},$$equals:function(a,b){var c=!0,d=this;return M(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1)}),c},$$validates:function(a){var d,e,f,g,h,i=this.$$keys();for(d=0;d<i.length&&(e=this[i[d]],f=a[i[d]],f!==c&&null!==f||!e.isOptional);d++){if(g=e.type.$normalize(f),!e.type.is(g))return!1;if(h=e.type.encode(g),b.isString(h)&&!e.type.pattern.exec(h))return!1}return!0},$$parent:c},this.ParamSet=k}function u(a,d){function e(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function g(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return!H(d)||d}function h(d,e,f,g){function h(a,b,c){return"/"===p?a:b?p.slice(0,-1)+a:c?p.slice(1)+a:a}function m(a){function b(a){var b=a(f,d);return!!b&&(J(b)&&d.replace().url(b),!0)}if(!a||!a.defaultPrevented){o&&d.url()===o;o=c;var e,g=j.length;for(e=0;e<g;e++)if(b(j[e]))return;k&&b(k)}}function n(){return i=i||e.$on("$locationChangeSuccess",m)}var o,p=g.baseHref(),q=d.url();return l||n(),{sync:function(){m()},listen:function(){return n()},update:function(a){return a?void(q=d.url()):void(d.url()!==q&&(d.url(q),d.replace()))},push:function(a,b,e){var f=a.format(b||{});null!==f&&b&&b["#"]&&(f+="#"+b["#"]),d.url(f),o=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace()},href:function(c,e,f){if(!c.validates(e))return null;var g=a.html5Mode();b.isObject(g)&&(g=g.enabled);var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),null!==i&&e&&e["#"]&&(i+="#"+e["#"]),i=h(i,g,f.absolute),!f.absolute||!i)return i;var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!I(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(J(a)){var b=a;a=function(){return b}}else if(!I(a))throw new Error("'rule' must be a function");return k=a,this},this.when=function(a,b){var c,h=J(b);if(J(a)&&(a=d.compile(a)),!h&&!I(b)&&!L(b))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a)}]),N(function(c,d){return g(c,b,a.exec(d.path(),d.search()))},{prefix:J(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(c=b,b=["$match",function(a){return f(c,a)}]),N(function(c,d){return g(c,b,a.exec(d.path()))},{prefix:e(a)})}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,b));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),l=a},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser"]}function v(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function m(a,b){if(!a)return c;var d=J(a),e=d?a:a.name,g=f(e);if(g){if(!b)throw new Error("No reference point given for path '"+e+"'");b=m(b);for(var h=e.split("."),i=0,j=h.length,k=b;i<j;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=z[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function n(a,b){A[a]||(A[a]=[]),A[a].push(b)}function p(a){for(var b=A[a]||[];b.length;)q(b.shift())}function q(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!J(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(z.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=c.indexOf(".")!==-1?c.substring(0,c.lastIndexOf(".")):J(b.parent)?b.parent:K(b.parent)&&J(b.parent.name)?b.parent.name:"";if(e&&!z[e])return n(e,b.self);for(var f in C)I(C[f])&&(b[f]=C[f](b,C.$delegates[f]));return z[c]=b,!b[B]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){y.$current.navigable==b&&j(a,c)||y.transitionTo(b,a,{inherit:!0,location:!1})}]),p(c),b}function r(a){return a.indexOf("*")>-1}function s(a){for(var b=a.split("."),c=y.$current.name.split("."),d=0,e=b.length;d<e;d++)"*"===b[d]&&(c[d]="*");return"**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length==c.length&&c.join("")===b.join("")}function t(a,b){return J(a)&&!H(b)?C[a]:I(b)&&J(a)?(C[a]&&!C.$delegates[a]&&(C.$delegates[a]=C[a]),C[a]=b,this):this}function u(a,b){return K(a)?b=a:b.name=a,q(b),this}function v(a,e,f,h,l,n,p,q,t){function u(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return p.update(),D;if(!g.retry)return null;if(f.$retry)return p.update(),E;var h=y.transition=e.when(g.retry);return h.then(function(){return h!==y.transition?A:(b.options.$retry=!0,y.transitionTo(b.to,b.toParams,b.options))},function(){return D}),p.update(),h}function v(a,c,d,g,i,j){function m(){var c=[];return M(a.views,function(d,e){var g=d.resolve&&d.resolve!==a.resolve?d.resolve:{};g.$template=[function(){return f.load(e,{view:d,locals:i.globals,params:n,notify:j.notify})||""}],c.push(l.resolve(g,i.globals,i.resolve,a).then(function(c){if(I(d.controllerProvider)||L(d.controllerProvider)){var f=b.extend({},g,i.globals);c.$$controller=h.invoke(d.controllerProvider,null,f)}else c.$$controller=d.controller;c.$$state=a,c.$$controllerAs=d.controllerAs,i[e]=c}))}),e.all(c).then(function(){return i.globals})}var n=d?c:k(a.params.$$keys(),c),o={$stateParams:n};i.resolve=l.resolve(a.resolve,o,i.resolve,a);var p=[i.resolve.then(function(a){i.globals=a})];return g&&p.push(g),e.all(p).then(m).then(function(a){return i})}var A=e.reject(new Error("transition superseded")),C=e.reject(new Error("transition prevented")),D=e.reject(new Error("transition aborted")),E=e.reject(new Error("transition failed"));return x.locals={resolve:null,globals:{$stateParams:{}}},y={params:{},current:x.self,$current:x,transition:null},y.reload=function(a){return y.transitionTo(y.current,n,{reload:a||!0,inherit:!1,notify:!0})},y.go=function(a,b,c){return y.transitionTo(a,b,N({inherit:!0,relative:y.$current},c))},y.transitionTo=function(b,c,f){c=c||{},f=N({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=y.$current,l=y.params,o=j.path,q=m(b,f.relative),r=c["#"];if(!H(q)){var s={to:b,toParams:c,options:f},t=u(s,j.self,l,f);if(t)return t;if(b=s.to,c=s.toParams,f=s.options,q=m(b,f.relative),!H(q)){if(!f.relative)throw new Error("No such state '"+b+"'");throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'")}}if(q[B])throw new Error("Cannot transition to abstract state '"+b+"'");if(f.inherit&&(c=i(n,c||{},y.$current,q)),!q.params.$$validates(c))return E;c=q.params.$$values(c),b=q;var z=b.path,D=0,F=z[D],G=x.locals,I=[];if(f.reload){if(J(f.reload)||K(f.reload)){if(K(f.reload)&&!f.reload.name)throw new Error("Invalid reload state object");var L=f.reload===!0?o[0]:m(f.reload);if(f.reload&&!L)throw new Error("No such reload state '"+(J(f.reload)?f.reload:f.reload.name)+"'");for(;F&&F===o[D]&&F!==L;)G=I[D]=F.locals,D++,F=z[D]}}else for(;F&&F===o[D]&&F.ownParams.$$equals(c,l);)G=I[D]=F.locals,D++,F=z[D];if(w(b,c,j,l,G,f))return r&&(c["#"]=r),y.params=c,O(y.params,n),f.location&&b.navigable&&b.navigable.url&&(p.push(b.navigable.url,c,{$$avoidResync:!0,replace:"replace"===f.location}),p.update(!0)),y.transition=null,e.when(y.current);if(c=k(b.params.$$keys(),c||{}),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,l).defaultPrevented)return a.$broadcast("$stateChangeCancel",b.self,c,j.self,l),p.update(),C;for(var M=e.when(G),P=D;P<z.length;P++,F=z[P])G=I[P]=d(G),M=v(F,c,F===b,M,G,f);var Q=y.transition=M.then(function(){var d,e,g;if(y.transition!==Q)return A;for(d=o.length-1;d>=D;d--)g=o[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=D;d<z.length;d++)e=z[d],e.locals=I[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);return r&&(c["#"]=r),y.transition!==Q?A:(y.$current=b,y.current=b.self,y.params=c,O(y.params,n),y.transition=null,f.location&&b.navigable&&p.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,l),p.update(!0),y.current)},function(d){return y.transition!==Q?A:(y.transition=null,g=a.$broadcast("$stateChangeError",b.self,c,j.self,l,d),g.defaultPrevented||p.update(),e.reject(d))});return Q},y.is=function(a,b,d){d=N({relative:y.$current},d||{});var e=m(a,d.relative);return H(e)?y.$current===e&&(!b||j(e.params.$$values(b),n)):c},y.includes=function(a,b,d){if(d=N({relative:y.$current},d||{}),J(a)&&r(a)){if(!s(a))return!1;a=y.$current.name}var e=m(a,d.relative);return H(e)?!!H(y.$current.includes[e.name])&&(!b||j(e.params.$$values(b),n,g(b))):c},y.href=function(a,b,d){d=N({lossy:!0,inherit:!0,absolute:!1,relative:y.$current},d||{});var e=m(a,d.relative);if(!H(e))return null;d.inherit&&(b=i(n,b||{},y.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?p.href(f.url,k(e.params.$$keys().concat("#"),b||{}),{absolute:d.absolute}):null},y.get=function(a,b){if(0===arguments.length)return o(g(z),function(a){return z[a].self});var c=m(a,b||y.$current);return c&&c.self?c.self:null},y}function w(a,b,c,d,e,f){function g(a,b,c){function d(b){return"search"!=a.params[b].location}var e=a.params.$$keys().filter(d),f=l.apply({},[a.params].concat(e)),g=new P.ParamSet(f);return g.$$equals(b,c)}if(!f.reload&&a===c&&(e===c.locals||a.self.reloadOnSearch===!1&&g(c,d,b)))return!0}var x,y,z={},A={},B="abstract",C={parent:function(a){if(H(a.parent)&&a.parent)return m(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?m(b[1]):x},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=N({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url,c={params:a.params||{}};if(J(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||x).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},ownParams:function(a){var b=a.url&&a.url.params||new P.ParamSet;return M(a.params||{},function(a,c){b[c]||(b[c]=new P.Param(c,null,a,"config"))}),b},params:function(a){return a.parent&&a.parent.params?N(a.parent.params.$$new(),a.ownParams):new P.ParamSet},views:function(a){var b={};return M(H(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?N({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};x=q({name:"",url:"^",views:null,"abstract":!0}),x.navigable=null,this.decorator=t,this.state=u,this.$get=v,v.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function w(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=N(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function x(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){return c(function(){a[0].scrollIntoView()},0,!1)}}]}function y(a,c,d,e){function f(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function g(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(j)return{enter:function(a,b,c){var d=j.enter(a,null,b,c);d&&d.then&&d.then(c)},leave:function(a,b){var c=j.leave(a,b);c&&c.then&&c.then(b)}};if(i){var d=i&&i(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return c()}var h=f(),i=h("$animator"),j=h("$animate"),k={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,f,h){return function(c,f,i){function j(){l&&(l.remove(),l=null),n&&(n.$destroy(),n=null),m&&(r.leave(m,function(){l=null}),l=m,m=null)}function k(g){var k,l=A(c,i,f,e),s=l&&a.$current&&a.$current.locals[l];if(g||s!==o){k=c.$new(),o=a.$current.locals[l];var t=h(k,function(a){r.enter(a,f,function(){n&&n.$emit("$viewContentAnimationEnded"),(b.isDefined(q)&&!q||c.$eval(q))&&d(a)}),j()});m=t,n=k,n.$emit("$viewContentLoaded"),n.$eval(p)}}var l,m,n,o,p=i.onload||"",q=i.autoscroll,r=g(i,c);c.$on("$stateChangeSuccess",function(){k(!1)}),c.$on("$viewContentLoading",function(){k(!1);
}),k(!0)}}};return k}function z(a,b,c,d){return{restrict:"ECA",priority:-400,compile:function(e){var f=e.html();return function(e,g,h){var i=c.$current,j=A(e,h,g,d),k=i&&i.locals[j];if(k){g.data("$uiView",{name:j,state:k.$$state}),g.html(k.$template?k.$template:f);var l=a(g.contents());if(k.$$controller){k.$scope=e,k.$element=g;var m=b(k.$$controller,k);k.$$controllerAs&&(e[k.$$controllerAs]=m),g.data("$ngControllerController",m),g.children().data("$ngControllerController",m)}l(e)}}}}}function A(a,b,c,d){var e=d(b.uiView||b.name||"")(a),f=c.inheritedData("$uiView");return e.indexOf("@")>=0?e:e+"@"+(f?f.state.name:"")}function B(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!c||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function C(a){var b=a.parent().inheritedData("$uiView");if(b&&b.state&&b.state.name)return b.state}function D(a,c){var d=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(e,f,g,h){var i=B(g.uiSref,a.current.name),j=null,k=C(f)||a.$current,l="[object SVGAnimatedString]"===Object.prototype.toString.call(f.prop("href"))?"xlink:href":"href",m=null,n="A"===f.prop("tagName").toUpperCase(),o="FORM"===f[0].nodeName,p=o?"action":l,q=!0,r={relative:k,inherit:!0},s=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in s&&(r[a]=s[a])});var t=function(c){if(c&&(j=b.copy(c)),q){m=a.href(i.state,j,r);var d=h[1]||h[0];return d&&d.$$addStateInfo(i.state,j),null===m?(q=!1,!1):void g.$set(p,m)}};i.paramExpr&&(e.$watch(i.paramExpr,function(a,b){a!==j&&t(a)},!0),j=b.copy(e.$eval(i.paramExpr))),t(),o||f.bind("click",function(b){var d=b.which||b.button;if(!(d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target"))){var e=c(function(){a.go(i.state,j,r)});b.preventDefault();var g=n&&!m?1:0;b.preventDefault=function(){g--<=0&&c.cancel(e)}}})}}}function E(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,d,e){function f(){g()?d.addClass(i):d.removeClass(i)}function g(){for(var a=0;a<j.length;a++)if(h(j[a].state,j[a].params))return!0;return!1}function h(b,c){return"undefined"!=typeof e.uiSrefActiveEq?a.is(b.name,c):a.includes(b.name,c)}var i,j=[];i=c(e.uiSrefActiveEq||e.uiSrefActive||"",!1)(b),this.$$addStateInfo=function(b,c){var e=a.get(b,C(d));j.push({state:e||{name:b},params:c}),f()},b.$on("$stateChangeSuccess",f)}]}}function F(a){var b=function(b){return a.is(b)};return b.$stateful=!0,b}function G(a){var b=function(b){return a.includes(b)};return b.$stateful=!0,b}var H=b.isDefined,I=b.isFunction,J=b.isString,K=b.isObject,L=b.isArray,M=b.forEach,N=b.extend,O=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),p.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",p),q.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",q);var P;r.prototype.concat=function(a,b){var c={caseInsensitive:P.caseInsensitive(),strict:P.strictMode(),squash:P.defaultSquashPolicy()};return new r(this.sourcePath+a+this.sourceSearch,N(c,b),this)},r.prototype.toString=function(){return this.source},r.prototype.exec=function(a,b){function c(a){function b(a){return a.split("").reverse().join("")}function c(a){return a.replace(/\\-/g,"-")}var d=b(a).split(/-(?!\\)/),e=o(d,b);return o(e,c).reverse()}var d=this.regexp.exec(a);if(!d)return null;b=b||{};var e,f,g,h=this.parameters(),i=h.length,j=this.segments.length-1,k={};if(j!==d.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(e=0;e<j;e++){g=h[e];var l=this.params[g],m=d[e+1];for(f=0;f<l.replace;f++)l.replace[f].from===m&&(m=l.replace[f].to);m&&l.array===!0&&(m=c(m)),k[g]=l.value(m)}for(;e<i;e++)g=h[e],k[g]=this.params[g].value(b[g]);return k},r.prototype.parameters=function(a){return H(a)?this.params[a]||null:this.$$paramNames},r.prototype.validates=function(a){return this.params.$$validates(a)},r.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a))return null;var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;f<i;f++){var k=f<h,l=d[f],m=e[l],n=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),n),q=!!p&&m.squash,r=m.type.encode(n);if(k){var s=c[f+1];if(q===!1)null!=r&&(j+=L(r)?o(r,b).join("-"):encodeURIComponent(r)),j+=s;else if(q===!0){var t=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(t)[1]}else J(q)&&(j+=q+s)}else{if(null==r||p&&q!==!1)continue;L(r)||(r=[r]),r=o(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+(l+"="+r),g=!0}}return j},s.prototype.is=function(a,b){return!0},s.prototype.encode=function(a,b){return a},s.prototype.decode=function(a,b){return a},s.prototype.equals=function(a,b){return a==b},s.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},s.prototype.pattern=/.*/,s.prototype.toString=function(){return"{Type:"+this.name+"}"},s.prototype.$normalize=function(a){return this.is(a)?a:this.decode(a)},s.prototype.$asArray=function(a,b){function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments)}}function e(a){return L(a)?a:H(a)?[a]:[]}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a}}function g(a){return!a}function h(a,b){return function(c){c=e(c);var d=o(c,a);return b===!0?0===n(d,g).length:f(d)}}function i(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==f.length)return!1;for(var g=0;g<d.length;g++)if(!a(d[g],f[g]))return!1;return!0}}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=i(d(a,"equals")),this.pattern=a.pattern,this.$normalize=h(d(a,"$normalize")),this.name=a.name,this.$arrayMode=b}if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new d(this,a)},b.module("ui.router.util").provider("$urlMatcherFactory",t),b.module("ui.router.util").run(["$urlMatcherFactory",function(a){}]),u.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",u),v.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",v),w.$inject=[],b.module("ui.router.state").provider("$view",w),b.module("ui.router.state").provider("$uiViewScroll",x),y.$inject=["$state","$injector","$uiViewScroll","$interpolate"],z.$inject=["$compile","$controller","$state","$interpolate"],b.module("ui.router.state").directive("uiView",y),b.module("ui.router.state").directive("uiView",z),D.$inject=["$state","$timeout"],E.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",D).directive("uiSrefActive",E).directive("uiSrefActiveEq",E),F.$inject=["$state"],G.$inject=["$state"],b.module("ui.router.state").filter("isState",F).filter("includedByState",G)}(window,window.angular),function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(a){var b=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(b,c,d,e,f,g){function h(){d.cancel(j),g.complete(),l=0,k=0}function i(b){var d,e=c.get("$http"),f=a.defaults;!b.cache&&!f.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(d=angular.isObject(b.cache)?b.cache:angular.isObject(f.cache)?f.cache:e);var g=void 0!==d&&void 0!==d.get(b.url);return void 0!==b.cached&&g!==b.cached?b.cached:(b.cached=g,g)}var j,k=0,l=0,m=g.latencyThreshold;return{request:function(a){return a.ignoreLoadingBar||i(a)||(e.$broadcast("cfpLoadingBar:loading",{url:a.url}),0===k&&(j=d(function(){g.start()},m)),k++,g.set(l/k)),a},response:function(a){return a&&a.config?(a.config.ignoreLoadingBar||i(a.config)||(l++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),l>=k?h():g.set(l/k)),a):(f.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),a)},responseError:function(a){return a&&a.config?(a.config.ignoreLoadingBar||i(a.config)||(l++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),l>=k?h():g.set(l/k)),b.reject(a)):(f.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),b.reject(a))}}}];a.interceptors.push(b)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(a,b,c,d){function e(){k||(k=a.get("$animate"));var e=b.find(n).eq(0);c.cancel(m),r||(d.$broadcast("cfpLoadingBar:started"),r=!0,v&&k.enter(o,e,angular.element(e[0].lastChild)),u&&k.enter(q,e,angular.element(e[0].lastChild)),f(w))}function f(a){if(r){var b=100*a+"%";p.css("width",b),s=a,t&&(c.cancel(l),l=c(function(){g()},250))}}function g(){if(!(h()>=1)){var a=0,b=h();a=b>=0&&b<.25?(3*Math.random()+3)/100:b>=.25&&b<.65?3*Math.random()/100:b>=.65&&b<.9?2*Math.random()/100:b>=.9&&b<.99?.005:0;var c=h()+a;f(c)}}function h(){return s}function i(){s=0,r=!1}function j(){k||(k=a.get("$animate")),d.$broadcast("cfpLoadingBar:completed"),f(1),c.cancel(m),m=c(function(){var a=k.leave(o,i);a&&a.then&&a.then(i),k.leave(q)},500)}var k,l,m,n=this.parentSelector,o=angular.element(this.loadingBarTemplate),p=o.find("div").eq(0),q=angular.element(this.spinnerTemplate),r=!1,s=0,t=this.autoIncrement,u=this.includeSpinner,v=this.includeBar,w=this.startSize;return{start:e,set:f,status:h,inc:g,complete:j,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),!function(a){function b(b){try{a.module(b)}catch(c){return!1}return!0}function c(a,c,d){function e(){a.$on("$locationChangeStart",function(a){c.$_blockLocationChange&&c.state().blockCount>0&&a.preventDefault()}),a.$on("$locationChangeSuccess",function(){c.$_blockLocationChange=d.blockBrowserNavigation})}if(d.blockBrowserNavigation)if(b("ngRoute"))var f=a.$on("$viewContentLoaded",function(){f(),e()});else e()}var d=a.module("blockUI",[]);d.config(["$provide","$httpProvider",function(a,b){a.decorator("$exceptionHandler",["$delegate","$injector",function(a,b){var c,d;return function(e,f){if(d=d||b.get("blockUIConfig"),d.resetOnException)try{c=c||b.get("blockUI"),c.instances.reset()}catch(g){console.log("$exceptionHandler",e)}a(e,f)}}]),b.interceptors.push("blockUIHttpInterceptor")}]),d.run(["$document","blockUIConfig","$templateCache",function(a,b,c){b.autoInjectBodyBlock&&a.find("body").attr("block-ui","main"),b.template&&(b.templateUrl="$$block-ui-template$$",c.put(b.templateUrl,b.template))}]),d.config(["$provide",function(a){a.decorator("$location",e)}]);var e=["$delegate","blockUI","blockUIConfig",function(b,c,d){function e(a){var d=b[a];b[a]=function(){var a=d.apply(b,arguments);return a===b&&(c.$_blockLocationChange=!1),a}}if(d.blockBrowserNavigation){c.$_blockLocationChange=!0;var f=["url","path","search","hash","state"];a.forEach(f,e)}return b}];d.directive("blockUiContainer",["blockUIConfig","blockUiContainerLinkFn",function(a,b){return{scope:!0,restrict:"A",templateUrl:a.templateUrl,compile:function(a){return b}}}]).factory("blockUiContainerLinkFn",["blockUI","blockUIUtils",function(a,b){return function(a,b,c){var d=b.inheritedData("block-ui");if(!d)throw new Error("No parent block-ui service instance located.");a.state=d.state()}}]),d.directive("blockUi",["blockUiCompileFn",function(a){return{scope:!0,restrict:"A",compile:a}}]).factory("blockUiCompileFn",["blockUiPreLinkFn",function(a){return function(b,c){return b.append('<div block-ui-container class="block-ui-container"></div>'),{pre:a}}}]).factory("blockUiPreLinkFn",["blockUI","blockUIUtils","blockUIConfig",function(a,b,d){return function(e,f,g){f.hasClass("block-ui")||f.addClass(d.cssClass),g.$observe("blockUiMessageClass",function(a){e.$_blockUiMessageClass=a});var h=g.blockUi||"_"+e.$id,i=a.instances.get(h);if("main"===h)c(e,i,d);else{var j=f.inheritedData("block-ui");j&&(i._parent=j)}e.$on("$destroy",function(){i.release()}),i.addRef(),e.$_blockUiState=i.state(),e.$watch("$_blockUiState.blocking",function(a){f.attr("aria-busy",!!a),f.toggleClass("block-ui-visible",!!a)}),e.$watch("$_blockUiState.blockCount > 0",function(a){f.toggleClass("block-ui-active",!!a)});var k=g.blockUiPattern;if(k){var l=b.buildRegExp(k);i.pattern(l)}f.data("block-ui",i)}}]),d.constant("blockUIConfig",{templateUrl:"angular-block-ui/angular-block-ui.ng.html",delay:250,message:"Loading ...",autoBlock:!0,resetOnException:!0,requestFilter:a.noop,autoInjectBodyBlock:!0,cssClass:"block-ui block-ui-anim-fade",blockBrowserNavigation:!1}),d.factory("blockUIHttpInterceptor",["$q","$injector","blockUIConfig","$templateCache",function(a,b,c,d){function e(){h=h||b.get("blockUI")}function f(a){c.autoBlock&&a&&!a.$_noBlock&&a.$_blocks&&(e(),a.$_blocks.stop())}function g(b){try{f(b.config)}catch(c){console.log("httpRequestError",c)}return a.reject(b)}var h;return{request:function(a){if(c.autoBlock&&("GET"!=a.method||!d.get(a.url))){var b=c.requestFilter(a);b===!1?a.$_noBlock=!0:(e(),a.$_blocks=h.instances.locate(a),a.$_blocks.start(b))}return a},requestError:g,response:function(a){return a&&f(a.config),a},responseError:g}}]),d.factory("blockUI",["blockUIConfig","$timeout","blockUIUtils","$document",function(b,c,d,e){function f(f){var i,k=this,l={id:f,blockCount:0,message:b.message,blocking:!1},m=[];this._id=f,this._refs=0,this.start=function(f){function j(){i=null,l.blocking=!0}f=f||{},a.isString(f)?f={message:f}:a.forEach(h,function(a){if(f[a])throw new Error("The property "+a+" is reserved for the block state.")}),a.extend(l,f),l.blockCount>0?l.message=f.message||l.message||b.message:l.message=f.message||b.message,l.blockCount++;var m=a.element(e[0].activeElement);m.length&&d.isElementInBlockScope(m,k)&&(k._restoreFocus=m[0],c(function(){k._restoreFocus&&k._restoreFocus!==g[0]&&k._restoreFocus.blur()})),i||0===b.delay?0===b.delay&&j():i=c(j,b.delay)},this._cancelStartTimeout=function(){i&&(c.cancel(i),i=null)},this.stop=function(){l.blockCount=Math.max(0,--l.blockCount),0===l.blockCount&&k.reset(!0)},this.isBlocking=function(){return l.blocking},this.message=function(a){l.message=a},this.pattern=function(a){return void 0!==a&&(k._pattern=a),k._pattern},this.reset=function(b){if(k._cancelStartTimeout(),l.blockCount=0,l.blocking=!1,k._restoreFocus&&(!e[0].activeElement||e[0].activeElement===g[0])){try{k._restoreFocus.focus()}catch(d){!function(){var a=k._restoreFocus;c(function(){if(a)try{a.focus()}catch(b){}},100)}()}k._restoreFocus=null}try{b&&a.forEach(m,function(a){a()})}finally{m.length=0}},this.done=function(a){m.push(a)},this.state=function(){return l},this.addRef=function(){k._refs+=1},this.release=function(){--k._refs<=0&&j.instances._destroy(k)}}var g=e.find("body"),h=["id","blockCount","blocking"],i=[];i.get=function(a){if(!isNaN(a))throw new Error("BlockUI id cannot be a number");var b=i[a];return b||(b=i[a]=new f(a),i.push(b)),b},i._destroy=function(b){if(a.isString(b)&&(b=i[b]),b){b.reset();var c=d.indexOf(i,b);i.splice(c,1),delete i[b.state().id]}},i.locate=function(a){var b=[];d.forEachFnHook(b,"start"),d.forEachFnHook(b,"stop");for(var c=i.length;c--;){var e=i[c],f=e._pattern;f&&f.test(a.url)&&b.push(e)}return 0===b.length&&b.push(j),b},d.forEachFnHook(i,"reset");var j=i.get("main");return j.addRef(),j.instances=i,j}]),d.factory("blockUIUtils",function(){var b=a.element,c={buildRegExp:function(a){var b,c=a.match(/^\/(.*)\/([gim]*)$/);if(!c)throw Error("Incorrect regular expression format: "+a);return b=new RegExp(c[1],c[2])},forEachFn:function(a,b,c){for(var d=a.length;d--;){var e=a[d];e[b].apply(e,c)}},forEachFnHook:function(a,b){a[b]=function(){c.forEachFn(this,b,arguments)}},isElementInBlockScope:function(a,b){for(var c=a.inheritedData("block-ui");c;){if(c===b)return!0;c=c._parent}return!1},findElement:function(a,d,e){var f=null;if(d(a))f=a;else{var g;g=e?a.parent():a.children();for(var h=g.length;!f&&h--;)f=c.findElement(b(g[h]),d,e)}return f},indexOf:function(a,b,c){for(var d=c||0,e=a.length;d<e;d++)if(a[d]===b)return d;return-1}};return c}),a.module("blockUI").run(["$templateCache",function(a){a.put("angular-block-ui/angular-block-ui.ng.html",'<div class="block-ui-overlay"></div><div class="block-ui-message-container" aria-live="assertive" aria-atomic="true"><div class="block-ui-message" ng-class="$_blockUiMessageClass">{{ state.message }}</div></div>')}])}(angular),function(a,b,c){"use strict";var d=b.isDefined,e=b.isUndefined,f=b.isNumber,g=b.isObject,h=b.isArray,i=b.extend,j=b.toJson,k=b.module("LocalStorageModule",[]);k.provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(a){return this.prefix=a,this},this.setStorageType=function(a){return this.storageType=a,this},this.setStorageCookie=function(a,b){return this.cookie.expiry=a,this.cookie.path=b,this},this.setStorageCookieDomain=function(a){return this.cookie.domain=a,this},this.setNotify=function(a,b){return this.notify={setItem:a,removeItem:b},this},this.$get=["$rootScope","$window","$document","$parse",function(a,b,c,k){var l,m=this,n=m.prefix,o=m.cookie,p=m.notify,q=m.storageType;c?c[0]&&(c=c[0]):c=document,"."!==n.substr(-1)&&(n=n?n+".":"");var r=function(a){return n+a},s=function(){try{var c=q in b&&null!==b[q],d=r("__"+Math.round(1e7*Math.random()));return c&&(l=b[q],l.setItem(d,""),l.removeItem(d)),c}catch(e){return q="cookie",a.$broadcast("LocalStorageModule.notification.error",e.message),!1}}(),t=function(b,c){if(c=e(c)?null:j(c),!s||"cookie"===m.storageType)return s||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),p.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:"cookie"}),z(b,c);try{l&&l.setItem(r(b),c),p.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:m.storageType})}catch(d){return a.$broadcast("LocalStorageModule.notification.error",d.message),z(b,c)}return!0},u=function(b){if(!s||"cookie"===m.storageType)return s||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),A(b);var c=l?l.getItem(r(b)):null;if(!c||"null"===c)return null;try{return JSON.parse(c)}catch(d){return c}},v=function(){var b,c;for(b=0;b<arguments.length;b++)if(c=arguments[b],s&&"cookie"!==m.storageType)try{l.removeItem(r(c)),p.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:c,storageType:m.storageType})}catch(d){a.$broadcast("LocalStorageModule.notification.error",d.message),B(c)}else s||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),p.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:c,storageType:"cookie"}),B(c)},w=function(){if(!s)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var b=n.length,c=[];for(var d in l)if(d.substr(0,b)===n)try{c.push(d.substr(b))}catch(e){return a.$broadcast("LocalStorageModule.notification.error",e.Description),[]}return c},x=function(b){var c=n?new RegExp("^"+n):new RegExp,d=b?new RegExp(b):new RegExp;if(!s||"cookie"===m.storageType)return s||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),C();var e=n.length;for(var f in l)if(c.test(f)&&d.test(f.substr(e)))try{v(f.substr(e))}catch(g){return a.$broadcast("LocalStorageModule.notification.error",g.message),C()}return!0},y=function(){try{return b.navigator.cookieEnabled||"cookie"in c&&(c.cookie.length>0||(c.cookie="test").indexOf.call(c.cookie,"test")>-1)}catch(d){return a.$broadcast("LocalStorageModule.notification.error",d.message),!1}}(),z=function(b,d,i){if(e(d))return!1;if((h(d)||g(d))&&(d=j(d)),!y)return a.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var k="",l=new Date,m="";if(null===d?(l.setTime(l.getTime()+-864e5),k="; expires="+l.toGMTString(),d=""):f(i)&&0!==i?(l.setTime(l.getTime()+24*i*60*60*1e3),k="; expires="+l.toGMTString()):0!==o.expiry&&(l.setTime(l.getTime()+24*o.expiry*60*60*1e3),k="; expires="+l.toGMTString()),b){var n="; path="+o.path;o.domain&&(m="; domain="+o.domain),c.cookie=r(b)+"="+encodeURIComponent(d)+k+n+m}}catch(p){return a.$broadcast("LocalStorageModule.notification.error",p.message),!1}return!0},A=function(b){if(!y)return a.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var d=c.cookie&&c.cookie.split(";")||[],e=0;e<d.length;e++){for(var f=d[e];" "===f.charAt(0);)f=f.substring(1,f.length);if(0===f.indexOf(r(b)+"=")){var g=decodeURIComponent(f.substring(n.length+b.length+1,f.length));try{return JSON.parse(g)}catch(h){return g}}}return null},B=function(a){z(a,null)},C=function(){for(var a=null,b=n.length,d=c.cookie.split(";"),e=0;e<d.length;e++){for(a=d[e];" "===a.charAt(0);)a=a.substring(1,a.length);var f=a.substring(b,a.indexOf("="));B(f)}},D=function(){return q},E=function(a,b,c,e){e=e||b;var f=u(e);return null===f&&d(c)?f=c:g(f)&&g(c)&&(f=i(c,f)),k(b).assign(a,f),a.$watch(b,function(a){t(e,a)},g(a[b]))},F=function(){for(var a=0,c=b[q],d=0;d<c.length;d++)0===c.key(d).indexOf(n)&&a++;return a};return{isSupported:s,getStorageType:D,set:t,add:t,get:u,keys:w,remove:v,clearAll:x,bind:E,deriveKey:r,length:F,cookie:{isSupported:y,set:z,add:z,get:A,remove:B,clearAll:C}}}]})}(window,window.angular);var duScrollDefaultEasing=function(a){"use strict";return a<.5?Math.pow(2*a,2)/2:1-Math.pow(2*(1-a),2)/2},duScroll=angular.module("duScroll",["duScroll.scrollspy","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.spyContext","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollSpyWait",100).value("duScrollGreedy",!1).value("duScrollOffset",0).value("duScrollEasing",duScrollDefaultEasing).value("duScrollCancelOnEvents","scroll mousedown mousewheel touchmove keydown").value("duScrollBottomSpy",!1).value("duScrollActiveClass","active");"undefined"!=typeof module&&module&&module.exports&&(module.exports=duScroll),angular.module("duScroll.scrollHelpers",["duScroll.requestAnimation"]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing","duScrollDuration","duScrollOffset","duScrollCancelOnEvents",function(a,b,c,d,e,f,g,h){"use strict";var i={},j=function(a){return"undefined"!=typeof HTMLDocument&&a instanceof HTMLDocument||a.nodeType&&a.nodeType===a.DOCUMENT_NODE},k=function(a){return"undefined"!=typeof HTMLElement&&a instanceof HTMLElement||a.nodeType&&a.nodeType===a.ELEMENT_NODE},l=function(a){return k(a)||j(a)?a:a[0]};i.duScrollTo=function(b,c,d,e){var f;if(angular.isElement(b)?f=this.duScrollToElement:angular.isDefined(d)&&(f=this.duScrollToAnimated),f)return f.apply(this,arguments);var g=l(this);return j(g)?a.scrollTo(b,c):(g.scrollLeft=b,void(g.scrollTop=c))};var m,n;i.duScrollToAnimated=function(a,f,g,i){g&&!i&&(i=e);var j=this.duScrollLeft(),k=this.duScrollTop(),l=Math.round(a-j),o=Math.round(f-k),p=null,q=0,r=this,s=function(a){(!a||q&&a.which>0)&&(h&&r.unbind(h,s),c(m),n.reject(),m=null)};if(m&&s(),n=b.defer(),0===g||!l&&!o)return 0===g&&r.duScrollTo(a,f),n.resolve(),n.promise;var t=function(a){null===p&&(p=a),q=a-p;var b=q>=g?1:i(q/g);r.scrollTo(j+Math.ceil(l*b),k+Math.ceil(o*b)),b<1?m=d(t):(h&&r.unbind(h,s),m=null,n.resolve())};return r.duScrollTo(j,k),h&&r.bind(h,s),m=d(t),n.promise},i.duScrollToElement=function(a,b,c,d){var e=l(this);angular.isNumber(b)&&!isNaN(b)||(b=g);var f=this.duScrollTop()+l(a).getBoundingClientRect().top-b;return k(e)&&(f-=e.getBoundingClientRect().top),this.duScrollTo(0,f,c,d)},i.duScrollLeft=function(b,c,d){if(angular.isNumber(b))return this.duScrollTo(b,this.duScrollTop(),c,d);var e=l(this);return j(e)?a.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:e.scrollLeft},i.duScrollTop=function(b,c,d){if(angular.isNumber(b))return this.duScrollTo(this.duScrollLeft(),b,c,d);var e=l(this);return j(e)?a.scrollY||document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop},i.duScrollToElementAnimated=function(a,b,c,d){return this.duScrollToElement(a,b,c||f,d)},i.duScrollTopAnimated=function(a,b,c){return this.duScrollTop(a,b||f,c)},i.duScrollLeftAnimated=function(a,b,c){return this.duScrollLeft(a,b||f,c)},angular.forEach(i,function(a,b){angular.element.prototype[b]=a;var c=b.replace(/^duScroll/,"scroll");angular.isUndefined(angular.element.prototype[c])&&(angular.element.prototype[c]=a)})}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function(a){"use strict";var b=["webkit","moz","o","ms"];return function(c,d){if(a[c])return a[c];for(var e,f=c.substr(0,1).toUpperCase()+c.substr(1),g=0;g<b.length;g++)if(e=b[g]+f,a[e])return a[e];return d}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(a,b){"use strict";var c=0,d=function(a,d){var e=(new Date).getTime(),f=Math.max(0,16-(e-c)),g=b(function(){a(e+f)},f);return c=e+f,g};return a("requestAnimationFrame",d)}]).factory("cancelAnimation",["polyfill","$timeout",function(a,b){"use strict";var c=function(a){b.cancel(a)};return a("cancelAnimationFrame",c)}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","$timeout","$window","$document","scrollContainerAPI","duScrollGreedy","duScrollSpyWait","duScrollBottomSpy","duScrollActiveClass",function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(e){var j=!1,k=!1,l=function(){k=!1;var b,g=e.container,j=g[0],l=0;if("undefined"!=typeof HTMLElement&&j instanceof HTMLElement||j.nodeType&&j.nodeType===j.ELEMENT_NODE)l=j.getBoundingClientRect().top,b=Math.round(j.scrollTop+j.clientHeight)>=j.scrollHeight;else{var m=d[0].body.scrollHeight||d[0].documentElement.scrollHeight;b=Math.round(c.pageYOffset+c.innerHeight)>=m}var n,o,p,q,r,s,t=h&&b?"bottom":"top";for(q=e.spies,o=e.currentlyActive,p=void 0,n=0;n<q.length;n++)r=q[n],s=r.getTargetPosition(),s&&(h&&b||s.top+r.offset-l<20&&(f||s.top*-1+l)<s.height)&&(!p||p[t]<s[t])&&(p={spy:r},p[t]=s[t]);p&&(p=p.spy),o===p||f&&!p||(o&&(o.$element.removeClass(i),a.$broadcast("duScrollspy:becameInactive",o.$element,angular.element(o.getTargetElement()))),p&&(p.$element.addClass(i),a.$broadcast("duScrollspy:becameActive",p.$element,angular.element(p.getTargetElement()))),e.currentlyActive=p)};return g?function(){j?k=!0:(l(),j=b(function(){j=!1,k&&l()},g,!1))}:l},k={},l=function(a){var b=a.$id,c={spies:[]};return c.handler=j(c),k[b]=c,a.$on("$destroy",function(){m(a)}),b},m=function(a){var b=a.$id,c=k[b],d=c.container;d&&d.off("scroll",c.handler),delete k[b]},n=l(a),o=function(a){return k[a.$id]?k[a.$id]:a.$parent?o(a.$parent):k[n]},p=function(a){var b,c,d=a.$scope;if(d)return o(d);for(c in k)if(b=k[c],b.spies.indexOf(a)!==-1)return b},q=function(a){for(;a.parentNode;)if(a=a.parentNode,a===document)return!0;return!1},r=function(a){var b=p(a);b&&(b.spies.push(a),b.container&&q(b.container)||(b.container&&b.container.off("scroll",b.handler),b.container=e.getContainer(a.$scope),b.container.on("scroll",b.handler).triggerHandler("scroll")))},s=function(b){var c=p(b);b===c.currentlyActive&&(a.$broadcast("duScrollspy:becameInactive",c.currentlyActive.$element),c.currentlyActive=null);var d=c.spies.indexOf(b);d!==-1&&c.spies.splice(d,1),b.$element=null};return{addSpy:r,removeSpy:s,createContext:l,destroyContext:m,getContextForScope:o}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function(a){"use strict";var b={},c=function(a,c){var d=a.$id;return b[d]=c,d},d=function(a){return b[a.$id]?a.$id:a.$parent?d(a.$parent):void 0},e=function(c){var e=d(c);return e?b[e]:a},f=function(a){var c=d(a);c&&delete b[c]};return{getContainerId:d,getContainer:e,setContainer:c,removeContainer:f}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","duScrollOffset","scrollContainerAPI",function(a,b,c){"use strict";return{link:function(d,e,f){e.on("click",function(e){if(f.href&&f.href.indexOf("#")!==-1||""!==f.duSmoothScroll){var g=f.href?f.href.replace(/.*(?=#[^\s]+$)/,"").substring(1):f.duSmoothScroll,h=document.getElementById(g)||document.getElementsByName(g)[0];if(h&&h.getBoundingClientRect){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();var i=f.offset?parseInt(f.offset,10):b,j=f.duration?parseInt(f.duration,10):a,k=c.getContainer(d);k.duScrollToElement(angular.element(h),isNaN(i)?0:i,isNaN(j)?0:j)}}})}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(a){"use strict";return{restrict:"A",scope:!0,compile:function(b,c,d){return{pre:function(b,c,d,e){a.createContext(b)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(a){"use strict";return{restrict:"A",scope:!0,compile:function(b,c,d){return{pre:function(b,c,d,e){d.$observe("duScrollContainer",function(d){angular.isString(d)&&(d=document.getElementById(d)),d=angular.isElement(d)?angular.element(d):c,a.setContainer(b,d),b.$on("$destroy",function(){a.removeContainer(b)})})}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","duScrollOffset","$timeout","$rootScope",function(a,b,c,d){"use strict";var e=function(a,b,c,d){angular.isElement(a)?this.target=a:angular.isString(a)&&(this.targetId=a),this.$scope=b,this.$element=c,this.offset=d};return e.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)||document.getElementsByName(this.targetId)[0]),this.target},e.prototype.getTargetPosition=function(){var a=this.getTargetElement();if(a)return a.getBoundingClientRect()},e.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function(f,g,h){var i,j=h.ngHref||h.href;if(j&&j.indexOf("#")!==-1?i=j.replace(/.*(?=#[^\s]+$)/,"").substring(1):h.duScrollspy?i=h.duScrollspy:h.duSmoothScroll&&(i=h.duSmoothScroll),i){var k=c(function(){var c=new e(i,f,g,(-(h.offset?parseInt(h.offset,10):b)));a.addSpy(c),f.$on("$locationChangeSuccess",c.flushTargetCache.bind(c));var j=d.$on("$stateChangeSuccess",c.flushTargetCache.bind(c));f.$on("$destroy",function(){a.removeSpy(c),j()})},0,!1);f.$on("$destroy",function(){c.cancel(k)})}}}}]);var sacVersion="?_1.0",app=angular.module("funnelApp",["ui.router","chieffancypants.loadingBar","LocalStorageModule","ngSanitize","blockUI","duScroll"]).run(["localStorageService","Funnel",function(a,b){b.saveDeviceInfo().success(function(b){a.set("deviceHash",b.deviceHash)})}]).config(["$sceDelegateProvider","$locationProvider","cfpLoadingBarProvider","$stateProvider","$httpProvider","blockUIConfig",function(a,b,c,d,e,f){f.message="Loading ...",f.delay=100,"ar"==sacParams.language&&(f.message="تحميل..."),a.resourceUrlWhitelist(["**"]),e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"],
b.html5Mode({enabled:!1,requireBase:!1}).hashPrefix("!"),c.includeSpinner=!0;var g=sacParams.baseUrl+"/views/funnel.html"+sacVersion;d.state("home",{url:"",views:{funnel:{templateUrl:g,controller:"FunnelController"},returningVisitor:{templateUrl:sacParams.baseUrl+"/views/returningVisitor.html"+sacVersion,controller:"ReturningVisitorController"},"returningVisitorForm@home":{templateUrl:sacParams.baseUrl+"/views/returningVisitorForm.html"+sacVersion,controller:"ReturningVisitorController"},returningVisitorForm:{templateUrl:sacParams.baseUrl+"/views/returningVisitorForm.html"+sacVersion,controller:"ReturningVisitorController"},returningVisitorContent:{templateUrl:sacParams.baseUrl+"/views/returningVisitorContent.html"+sacVersion,controller:"ReturningVisitorController"},valuationForm:{templateUrl:sacParams.baseUrl+"/views/valuationForm.html"+sacVersion,controller:"ValuationFormController"},testimonials:{templateUrl:sacParams.baseUrl+"/views/testimonials.html"+sacVersion,controller:"ReturningVisitorController"}}}).state("funnel-step1",{url:"/step1",params:{step:1},views:{funnel:{templateUrl:g,controller:"FunnelController"},funnelContent:{templateUrl:sacParams.baseUrl+"/views/funnelContent.html"+sacVersion,controller:"FunnelContentController"},"returningVisitorForm@funnel-step1":{templateUrl:sacParams.baseUrl+"/views/returningVisitorForm.html"+sacVersion,controller:"ReturningVisitorController"},"testimonials@funnel-step1":{templateUrl:sacParams.baseUrl+"/views/testimonials.html"+sacVersion,controller:"ReturningVisitorController"}}}).state("funnel-step2",{url:"/step2",params:{step:2},views:{funnel:{templateUrl:g,controller:"FunnelController"}}}).state("funnel-step3",{url:"/step3",params:{step:3},views:{funnel:{templateUrl:g,controller:"FunnelController"},funnelContent:{templateUrl:sacParams.baseUrl+"/views/funnelContent.html"+sacVersion,controller:"FunnelContentController"}}}).state("funnel-step4",{url:"/step4",params:{step:4},views:{funnel:{templateUrl:g,controller:"FunnelController"}}}).state("funnel-step5",{url:"/step5",params:{step:5},views:{funnel:{templateUrl:g,controller:"FunnelController"}}}).state("update-appointment",{url:"/update/{appointmentId}/{trackingKey}",views:{funnel:{templateUrl:g,controller:"FunnelController"}}}).state("book-appointment",{url:"/bookAppointment/{carId}/{trackingKey}",views:{funnel:{templateUrl:g,controller:"FunnelController"}}})}]).filter("range",function(){return function(a,b){b=parseInt(b);for(var c=0;c<b;c++)a.push(c);return a}}).filter("ucfirst",function(){return function(a){a+="";var b=a.charAt(0).toUpperCase();return b+a.substr(1)}}).filter("formatCurrency",function(){return function(a,b){return a+" "+b}}).filter("aliastext",function(){return function(a){return a=a.replace("-"," ",a),a=ucwords(a)}}).filter("getById",function(){return function(a,b){for(var c=0,d=a.length;c<d;c++)if(+a[c].id==+b)return a[c];return null}}).directive("nospace",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){var b=a.replace(/ /g,"");return d.$setViewValue(b),d.$render(),b})}}}).directive("convertToNumber",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){return parseInt(a,10)}),d.$formatters.push(function(a){return""+a})}}}).directive("setNgAnimate",["$animate",function(a){return{link:function(b,c,d){b.$watch(function(){return b.$eval(d.setNgAnimate,b)},function(b,d){console.log("Directive animation Enabled: "+b),a.enabled(!!b,c)})}}}]).directive("videoThumbnail",["$stateParams","smoothScroll",function(a,b){var c=1;return{restrict:"E",scope:{buttonText:"=buttonText",contentText:"=contentText",videoLink:"@videoLink",thumbUrl:"@thumbUrl"},templateUrl:sacParams.baseUrl+"/views/templates/_videoThumbnail.html"+sacVersion,link:function(d,e,f){d.uniqueId="video-thumbnail"+c++,d.isArabic="ar"==sacParams.language,d.openVideoModal=function(){d.showVideoModal=!0,d.videoLink=f.videoLink;var a=angular.element("#"+d.uniqueId),b='<div class="modal-backdrop fade in" id="back-drop"></div>';angular.element("body").append(a),a.after(b),a.off("click"),a.on("click",function(a){document.querySelector("#"+d.uniqueId+" .modal-content").contains(a.target)||(angular.element(b).removeClass("in").addClass("out"),d.$apply(function(){d.showVideoModal&&d.closeVideoModal()}))})},d.closeVideoModal=function(){d.videoLink="",d.showVideoModal=!1,document.getElementById("back-drop").remove()},d.gotoAppointment=function(){d.closeVideoModal();var c=document.getElementsByClassName("funnel-step")[0];3==a.step&&(c=document.getElementById("sacFunnelBooking")),b(c,65)}}}}]).directive("imageonload",["blockUI",function(a){return{restrict:"A",link:function(a,b,c){b.bind("load",function(){a.$apply(c.imageonload)}),b.bind("error",function(){a.$apply(c.imageonload)})}}}]).directive("testimonialSlider",function(){return{restrict:"AE",link:function(a,b,c){function d(){g(),b.find("ul").prepend(b.find("ul li:last-child")),b.find("ul").css("left",""),h=f()}function e(){g(),b.find("ul").append(b.find("ul li:first-child")),b.find("ul").css("left",""),h=f()}function f(){return setInterval(function(){e()},5e3)}function g(){clearInterval(h)}var h=f(),i=b.find("li").length,j=b.find("li").width(),k=i*j;b.css({width:j}),b.find("ul").css({width:k,marginLeft:-j}),b.find("ul").prepend(b.find("ul li:last-child")),b.find("a.control_prev").on("click",function(){d()}),b.find("a.control_next").on("click",function(){e()}),b.find(".valuationModalButton").on("click",function(){var b=angular.element(document).find("#testimonialModal iframe");b.attr("height",angular.element(this).data("height")),b.attr("width",angular.element(this).data("width")),b.attr("src",angular.element(this).data("url")),window.innerWidth<=375&&b.attr("height","180px"),a.openVideoModal(),angular.element("#returningVisitorForm .next-step").on("click",function(){a.showTestimonialVideo&&a.closeVideoModal()})}),a.openVideoModal=function(){a.showTestimonialVideo=!0;var b=angular.element("#testimonialModal"),c='<div class="modal-backdrop fade in" id="back-drop"></div>';angular.element("body").append(b),b.after(c),b.addClass("show-modal"),angular.element("#returningVisitorForm .next-step").off("click"),b.off("click"),b.on("click",function(b){document.querySelector("#testimonialModal .modal-content").contains(b.target)||a.$apply(function(){a.closeVideoModal()})})},a.closeVideoModal=function(){a.showTestimonialVideo=!1,angular.element("#testimonialModal").removeClass("show-modal"),angular.element("#testimonialModal iframe").attr("src",""),document.getElementById("back-drop").remove()}}}}).factory("smoothScroll",function(){return smoothScroll}).directive("smoothScroll",["smoothScroll",function(a){return{restrict:"A",scope:{callbackBefore:"&",callbackAfter:"&"},link:function(b,c,d){"undefined"!=typeof d.scrollIf&&"true"!==d.scrollIf||setTimeout(function(){var e=function(a){if(d.callbackBefore){var c=b.callbackBefore({element:a});"function"==typeof c&&c(a)}},f=function(a){if(d.callbackAfter){var c=b.callbackAfter({element:a});"function"==typeof c&&c(a)}};a(c[0],{duration:d.duration,offset:d.offset,easing:d.easing,callbackBefore:e,callbackAfter:f,containerId:d.containerId})},0)}}}]).directive("scrollTo",["smoothScroll",function(a){return{restrict:"A",scope:{callbackBefore:"&",callbackAfter:"&"},link:function(b,c,d){var e;c.on("click",function(c){if(c.preventDefault(),e=document.getElementById(d.scrollTo)){var f=function(a){if(d.callbackBefore){var c=b.callbackBefore({element:a});"function"==typeof c&&c(a)}},g=function(a){if(d.callbackAfter){var c=b.callbackAfter({element:a});"function"==typeof c&&c(a)}};return a(e,{duration:d.duration,offset:d.offset,easing:d.easing,callbackBefore:f,callbackAfter:g,containerId:d.containerId}),!1}})}}}]).directive("mobileInput",["Funnel",function(a){return{scope:{mobile:"=",mobileError:"=",originalTitle:"@"},templateUrl:sacParams.baseUrl+"/views/templates/_mobileInput.html"+sacVersion,link:function(b,c,d,e){b.placeHolder=d.placeholder||"XXXXXXXXX",b.language=d.language||"en",b.dropdownToggle=!1,void 0==b.mobile&&(b.mobile={}),b.mobile&&!isNaN(b.mobile)&&(b.mobile={number:b.mobile}),d.name&&angular.element(document.querySelector("#mobileField")).attr("name",d.name),d.id&&angular.element(document.querySelector("#mobileField")).attr("id",d.id),a.getCountryCallingCodes(sacParams.language).success(function(a){b.countries=a.countries,b.mobile&&!b.mobile.code&&(b.mobile.code=b.countries[1].code,b.mobile.countryId=b.countries[1].countryId)}),b.countrySelected=function(a){b.mobile.code=a.code,b.mobile.countryId=a.countryId,b.dropdownToggle=!1}}}}]),smoothScroll=function(a,b){b=b||{};var c=b.duration||800,d=b.offset||0,e=b.easing||"easeInOutQuart",f=b.callbackBefore||function(){},g=b.callbackAfter||function(){},h=document.getElementById(b.containerId)||null,i=void 0!=h&&null!=h,j=function(){return i?h.scrollTop:window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},k=function(a,b){switch(a){case"easeInQuad":return b*b;case"easeOutQuad":return b*(2-b);case"easeInOutQuad":return b<.5?2*b*b:-1+(4-2*b)*b;case"easeInCubic":return b*b*b;case"easeOutCubic":return--b*b*b+1;case"easeInOutCubic":return b<.5?4*b*b*b:(b-1)*(2*b-2)*(2*b-2)+1;case"easeInQuart":return b*b*b*b;case"easeOutQuart":return 1- --b*b*b*b;case"easeInOutQuart":return b<.5?8*b*b*b*b:1-8*--b*b*b*b;case"easeInQuint":return b*b*b*b*b;case"easeOutQuint":return 1+--b*b*b*b*b;case"easeInOutQuint":return b<.5?16*b*b*b*b*b:1+16*--b*b*b*b*b;default:return b}},l=function(a){var b=0;if(a.offsetParent)do b+=a.offsetTop,a=a.offsetParent;while(a);return b=Math.max(b-d,0)};setTimeout(function(){var b,d,m,n,o=null,p=j(),q=l(a),r=0,s=q-p,t=function(){o=j(),i?(m=h.scrollHeight,n=h.clientHeight+o):(m=document.body.scrollheight,n=window.innerHeight+o),(d==q||o==q||n>=m)&&(clearInterval(v),g(a))},u=function(){r+=16,b=r/c,b=b>1?1:b,d=p+s*k(e,b),i?h.scrollTop=d:window.scrollTo(0,d),t()};f(a);var v=setInterval(u,16)},0)};app.controller("FunnelContentController",["$document","$filter","$scope","$rootScope","$state","$timeout","localStorageService","$stateParams","$sce","Application","Funnel","blockUI",function(a,b,c,d,e,f,g,h,i,j,k,l){c.config={country:null,language:null},c.step=null,c.lang={},c.showBenefits=!1,c.init=function(){switch(c.step=h.step,j.init(c),c.showBenefits=1==c.config.country,c.state=e.$current,c.state.name){case"funnel-step1":k.getBranches(c.config.country,c.config.language).success(function(a){c.branches=a.items});break;case"funnel-step3":k.getBookingInfo(c.config.country,c.config.language,c.data.car.make,c.data.car.model,c.data.car.year,c.data.car.id).success(function(a){c.bookingInfo=a})}},c.bookButtonClicked=function(){var a=document.getElementById("sacFunnelBooking");smoothScroll(a,{offset:60})},c.showVideoThumbnail=function(){return"en"==c.config.language},c.showStep=function(a){return!(sacParams.excludedContentSteps&&sacParams.excludedContentSteps.indexOf(a)>-1)&&c.step==a},c.replaceSiteName=function(a){return void 0==a?"":a.replace("SellAnyCar.com",sacParams.siteName)}}]),app.controller("FunnelController",["$document","$filter","$scope","$rootScope","$state","$timeout","$interval","localStorageService","$stateParams","$sce","Application","Funnel","blockUI","GAObject","smoothScroll",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){c.config={country:null,language:null},c.showModal=!1,c.tmp={},c.step=null,c.errors={},c.hasErrors=function(){for(var a in c.errors)if(c.errors[a])return!0;return!1},c.lang={},d.showValuationHeader=!0,c.trustSrc=function(a){return j.trustAsResourceUrl(a)},c.init=function(){switch(a.scrollTopAnimated(0),c.step=i.step,c.errorMessage=null,c.wrapperStyle=sacParams.wrapperStyle,h.set("username",sacConfig.apiUser),h.set("token",sacConfig.apiToken),c.baseUrl=sacParams.baseUrl,k.init(c),sacParams.make&&(c.data.car.make=sacParams.make),sacParams.model&&(c.data.car.model=sacParams.model),sacParams.year&&(c.data.car.year=sacParams.year),c.waitMessage=c.valuationPriceLoadingMessage(),h.set("data",c.data),c.state=e.$current,c.state.name){case"home":return void e.go("funnel-step1");case"update-appointment":l.getAppointmentDetails(i.appointmentId,i.trackingKey,c.config.country,c.config.language).success(function(a){h.set("data",a.item),e.go("funnel-step3")});break;case"book-appointment":l.getValuationDetails(i.carId,i.trackingKey,c.config.country,c.config.language).success(function(a){a.item.appointment={},a.item.marketing.sellingReasons={},h.set("data",a.item),e.go("funnel-step3")});break;case"funnel-step1":n.trackPage("/valuation/selectyourcar"),c.data.appointment.id=null,c.data.car.id=null,l.getMakes(c.config.country,k.numberOfPopularItems).success(function(a){c.makes=a.items,a.mostPopular&&a.mostPopular.length&&(a.mostPopular.push({name:"-------------"}),Array.prototype.unshift.apply(c.makes,a.mostPopular))}),c.data.car.make&&c.makeSelected(c.modelSelected);break;case"funnel-step2":n.trackPage("/valuation/modelcondition"),n.trackPage("/valuation/email"),l.getDropdowns(c.data.car.make,c.data.car.model,c.data.car.year,c.config.country,c.config.language).success(function(a){if(c.dropdowns=a.items,81==c.config.country)var d=c.engineSpecsSelected;else var d=void 0;b("getById")(c.dropdowns.bodytypes,c.data.car.body)||(c.data.car.body=null),1!=c.dropdowns.bodytypes.length||c.data.car.body||(c.data.car.body=c.dropdowns.bodytypes[0].id),c.dropdowns.bodytypes&&c.data.car.body&&c.bodySelected(d)});break;case"funnel-step3":n.trackPage("/appointment/bookingform"),m.start({message:c.waitMessage}),void 0!==c.data.appointment.branch&&c.branchSelected(c.dateSelected),c.data.car.valuationPrice||(c.showPriceSuggestion=!0),c.valuationImage=sacConfig.apiUrl+"/funnel/valuationPrice?trackingKey="+c.data.car.trackingKey+"&carId="+c.data.car.id,l.getAppoointmentsBooked().success(function(a){c.appointmentsBooked=a.appointmentsBooked}),c.Math=window.Math,c.countDownTimer=180,g(function(){c.countDownTimer>=0&&c.countDownTimer--},1e3),l.getBranches(c.config.country,c.config.language).success(function(a){c.branches=a.items}),l.getBookingInfo(c.config.country,c.config.language,c.data.car.make,c.data.car.model,c.data.car.year).success(function(a){c.bookingInfo=a});break;case"funnel-step4":n.trackPage("/appointment/verification");break;case"funnel-step5":n.trackPage("/appointment/thankyou"),d.showValuationHeader=!1,c.appointmentCalendarLink=sacConfig.apiUrl+"/funnel/appointmentAsCalendar?trackingKey="+c.data.appointment.trackingKey+"&appointmentId="+c.data.appointment.id+"&country="+c.config.country,c.appointmentUpdateLink="#!/update/"+c.data.appointment.id+"/"+c.data.appointment.trackingKey,void 0===c.data.marketing.sellingReasons.answered&&(c.data.marketing.sellingReasons.answered=!1),c.data.marketing.sellingReasons.answered||(l.getMakes(c.config.country).success(function(a){c.makes=a.items}),l.getSellingReasons(c.config.language).success(function(a){c.sellingReasons=a.items})),l.getBranchInfo(c.data.appointment.branch,c.config.language).success(function(a){c.branchInfo=a.item,c.branchInfo.map=j.trustAsHtml(c.branchInfo.map)})}},c.makeSelected=function(a){return c.data.car.make?void l.getModels(c.config.country,c.data.car.make,k.numberOfPopularItems).success(function(d){c.models=d.items,d.mostPopular&&d.mostPopular.length&&c.models.length>k.numberOfPopularItems&&(d.mostPopular.push({name:"-------------"}),Array.prototype.unshift.apply(c.models,d.mostPopular)),b("getById")(d.items,c.data.car.model)||(c.data.car.model=null),void 0!==a&&a()}):void(c.models=[])},c.modelSelected=function(a){return c.data.car.model?void l.getYears(c.config.country,c.data.car.make,c.data.car.model).success(function(b){c.years=b.items,void 0!==a&&a()}):void(c.years=[])},c.branchSelected=function(a){l.getBranchInfo(c.data.appointment.branch,c.config.language).success(function(a){c.branch=a.item}),l.getDateRange(c.data.appointment.branch,c.config.language).success(function(a){c.dates=a.items,b("getById")(a.items,c.data.appointment.date)||(c.data.appointment.date=null),c.data.appointment.date||(c.data.appointment.date=c.dates[0].id,c.dateSelected())}),void 0!==a&&a()},c.dateSelected=function(a){l.getTimeRange(c.data.appointment.date,c.data.appointment.branch,c.config.language).success(function(a){c.times=a.items,b("getById")(a.items,c.data.appointment.time)||(c.data.appointment.time=null),c.data.appointment.time||(c.data.appointment.time=c.times[0].id)}),void 0!==a&&a()},c.step1=function(){if(c.errors.make=!c.data.car.make,c.errors.model=!c.data.car.model,c.errors.year=!c.data.car.year,c.hasErrors())return!1;var a=h.get("data"),b=!1;a.car.make==c.data.car.make&&a.car.model==c.data.car.model&&a.car.year==c.data.car.year||(b=!0),b&&(c.data.car={make:c.data.car.make,model:c.data.car.model,year:c.data.car.year}),c.data.appointment={},c.data.marketing.sellingReasons={},h.set("data",c.data),e.go("funnel-step2")},c.step2=function(){c.data.appointment={},c.data.marketing.sellingReasons={},h.set("data",c.data),void 0!==c.config.sacSource&&(c.data.contact.sacSource=c.config.sacSource),m.start({message:c.waitMessage}),l.getPrice(c.data.car,c.data.contact,c.config.country,c.config.language).success(function(a){c.data.car.valuationPrice=a.item.valuationPrice,c.data.car.suggestedPrice=null,c.data.car.id=a.item.carId,c.data.car.trackingKey=a.item.trackingKey,c.data.car.currency=a.item.currency,c.data.car.carName=a.item.carName,c.data.car.carNameMakeModel=a.item.carNameMakeModel,c.data.car.carNameMake=a.item.carNameMake,c.data.car.carNameModel=a.item.carNameModel,c.data.car.carNameBody=a.item.carNameBody,c.data.car.carRental=a.item.carRental,c.data.car.carRentalMessage=a.item.carRentalMessage,c.data.car.carRentalDurationText=a.item.carRentalDurationText,h.set("data",c.data),n.completedValuation(c.data.car.carNameMake,c.data.car.carNameModel,c.data.car.year,c.data.car.carNameBody),e.go("funnel-step3"),m.stop()}).error(function(a){if(c.errors={},101==a.errorCode){if(void 0!==a.errorData.missingFields)for(var b in a.errorData.missingFields)c.errors[a.errorData.missingFields[b]]=!0;c.setErrorMessage(c.lang.required_fields_error)}else c.setErrorMessage(a.message);m.stop()})},c.step3=function(){h.set("data",c.data),l.bookAppointment(c.data.contact,c.data.car,c.data.appointment,c.config.country,c.config.language).success(function(a){c.data.appointment.id=a.item.appointmentId,c.data.appointment.trackingKey=a.item.trackingKey,c.data.appointment.resendSMSEnabled=!0,h.set("data",c.data),n.completedAppointment(c.data.car.carNameMake,c.data.car.carNameModel,c.data.car.year,c.data.car.carNameBody),c.config.sacSource&&l.getSacSourcePixel(c.data.appointment.id,c.config.sacSource).success(function(a){if(a.item.pixelUrl&&a.item.pixelType)switch(a.item.pixelType){case"postback":l.sendPixelRequest(a.item.pixelUrl);break;case"image":var b='<img src="'+a.item.pixelUrl+'" width="0" height="0" style="visibility: hidden" />';angular.element("#funnel").prepend(b)}}),e.go("funnel-step4")}).error(function(a){if(c.errors={},101==a.errorCode){if(void 0!==a.errorData.missingFields)for(var b in a.errorData.missingFields)c.errors[a.errorData.missingFields[b]]=!0;c.setErrorMessage(c.lang.required_fields_error)}else 2==a.errorCode?(c.errors.mobile=!0,c.setErrorMessage(c.lang.invalid_mobile_number)):c.setErrorMessage(c.data.message)})},c.step4=function(){l.confirmAppointment(c.data.appointment.id,c.data.appointment.trackingKey,c.data.appointment.verificationCode,c.config.country,c.config.language).success(function(a){c.errors.verificationCode=!1,c.data.appointment.confirmed=!0,h.set("data",c.data),e.go("funnel-step5")}).error(function(a){c.errors.verificationCode=!0,c.errorMessage=a.message})},c.skipStep4=function(){c.data.appointment.resendSMSEnabled?(c.tmp.updatedMobile=angular.copy(c.data.contact.mobile),c.invalidMobile=!1,c.openModal()):e.go("funnel-step5")},c.resendSMS=function(a){c.tmp.updatedMobile.number&&l.resendSMS(c.data.car.id,c.tmp.updatedMobile,c.config.country,c.config.language).success(function(b){"update-number"==a.target.id&&(c.data.contact.mobile=c.tmp.updatedMobile),c.data.appointment.resendSMSEnabled=!1,h.set("data",c.data),c.codeResent=!0,c.invalidMobile=!1,c.closeModal()}).error(function(a){c.invalidMobile=!0})},c.openModal=function(){c.showModal=!0;var a=angular.element("#resend-option");angular.element("body").append(a),a.after('<div class="modal-backdrop fade in" id="back-drop"></div>')},c.closeModal=function(){c.showModal=!1,document.getElementById("back-drop").remove()},c.saveSuggestedPrice=function(){l.saveSuggestedPrice(c.data.car.id,c.data.car.trackingKey,c.suggestedPrice).success(function(a){c.showPriceSuggestionMessage=!0,c.showPriceSuggestion=!1,c.data.car.suggestedPrice=c.suggestedPrice,h.set("data",c.data)})},c.saveSellingReasons=function(){l.saveSellingReasons(c.data.marketing.sellingReasons,c.data.appointment.trackingKey,c.data.appointment.id,c.config.country).success(function(a){c.data.marketing.sellingReasons.answered=!0,h.set("data",c.data)})},c.setErrorMessage=function(a){c.errorMessage=a},c.bodySelected=function(a){81==c.config.country?c.data.car.body?l.getEngineSpecs(c.data.car.make,c.data.car.model,c.data.car.year,c.data.car.body,c.config.country,c.config.language).success(function(b){c.engineSpecs=b.items,void 0!==a&&a()}):c.engineSpecs=[]:c.data.car.body?l.getEngines(c.data.car.make,c.data.car.model,c.data.car.year,c.data.car.body,c.config.country,c.config.language).success(function(d){c.engines=d.items,b("getById")(d.items,c.data.car.engine)||(c.data.car.engine=null),1!=c.engines.length||c.data.car.engine||(c.data.car.engine=c.engines[0].id),void 0!==a&&a()}):c.engines=[]},c.engineSpecsSelected=function(a){c.data.car.engineSpecs?l.getVehicles(c.data.car.engineSpecs,c.data.car.make,c.data.car.model,c.data.car.year,c.data.car.body,c.config.country,c.config.language).success(function(b){c.vehicles=b.items,void 0!==a&&a()}):c.vehicles=[]},c.termsUrl=function(){c.config.termsUrlCallback&&c.config.termsUrlCallback()},c.privacyPolicyUrl=function(){c.config.privacyPolicyUrlCallback&&c.config.privacyPolicyUrlCallback()},c.closeAndScrollToBooking=function(){c.closeVideo(),c.bookButtonClicked()},c.bookButtonClicked=function(){var a=document.getElementById("sacFunnelBooking");o(a,{offset:65})},c.openVideo=function(){"ar"==c.config.language?c.videoUrl="https://www.youtube.com/embed/-39fr5MW5Zs":c.videoUrl="https://www.youtube.com/embed/fjvE_q7PUkM",c.showVideoModal=!0;var a=angular.element(document.getElementById("video-thumbnail-2"));angular.element(document).find("body").append(a);var b='<div class="modal-backdrop fade in" id="back-drop"></div>';a.after(b),a.off("click"),a.on("click",function(a){document.querySelector("#video-thumbnail-2 .modal-content").contains(a.target)||(angular.element(b).removeClass("in").addClass("out"),c.$apply(function(){c.closeVideo()}))})},c.closeVideo=function(){c.showVideoModal=!1,c.videoUrl="",document.getElementById("back-drop").remove()},c.stopLoading=function(){m.stop()},c.valuationPriceLoadingMessage=function(){var a="Based on previous purchases of same cars, we are calculating your car's value now...";return"ar"==sacParams.language&&(a="بناء على المشتريات السابقة من نفس نوعية السيارات، نحن نقوم بحساب قيمة سيارتك الآن ..."),a},c.isMobileNumberUpdated=function(){if(!c.tmp.updatedMobile)return!1;var a=c.tmp.updatedMobile.code+""+c.tmp.updatedMobile.number,b=c.data.contact.mobile.code+""+c.data.contact.mobile.number;return a==b}}]),app.controller("MainController",["$scope","$rootScope","$state","$timeout","$localStorage","$stateParams","$sce","Application","Funnel","MainService",function(a,b,c,d,e,f,g,h,i,j){b.$on("$stateChangeSuccess",function(b,d,e,f,g){c.current=d,a.state=c.current,"home"==a.state.name&&c.go("funnel-step1")})}]),app.controller("ReturningVisitorController",["$document","$filter","$scope","$rootScope","$state","$timeout","localStorageService","$stateParams","$sce","Application","Funnel","blockUI",function(a,b,c,d,e,f,g,h,i,j,k,l){c.config={country:null,language:null},c.lang={},c.returningVisitor=!1,c.init=function(){j.init(c),k.getMakes(c.config.country,j.numberOfPopularItems).success(function(a){c.makes=a.items,a.mostPopular&&a.mostPopular.length&&(a.mostPopular.push({name:"-------------"}),Array.prototype.unshift.apply(c.makes,a.mostPopular))}),c.data.car.make&&c.makeSelected(c.modelSelected)},c.makeSelected=function(a){return c.data.car.make?(k.getModels(c.config.country,c.data.car.make,j.numberOfPopularItems).success(function(d){c.models=d.items,d.mostPopular&&d.mostPopular.length&&c.models.length>j.numberOfPopularItems&&(d.mostPopular.push({name:"-------------"}),Array.prototype.unshift.apply(c.models,d.mostPopular)),b("getById")(d.items,c.data.car.model)||(c.data.car.model=null),void 0!==a&&a()}),void c.checkVisitorData()):void(c.models=[])},c.modelSelected=function(a){return c.data.car.model?(k.getYears(c.config.country,c.data.car.make,c.data.car.model).success(function(b){c.years=b.items,void 0!==a&&a()}),void c.checkVisitorData()):void(c.years=[])},c.yearSelected=function(){c.checkVisitorData()},c.checkVisitorData=function(){var b=g.get("data");if(c.returningVisitor&&b.car.id)if(b.car.make==c.data.car.make&&b.car.model==c.data.car.model&&b.car.year==c.data.car.year)c.returningVisitor=!0,d.$broadcast("funnel.returningVisitor.update",{value:c.returningVisitor});else{c.returningVisitor=!1;var e=angular.element(document.getElementById("sacReturningVisitor"));a.scrollToElementAnimated(e,300),d.$broadcast("funnel.returningVisitor.update",{value:c.returningVisitor})}},c.submit=function(){c.returningVisitor?window.location=c.config.funnelUrl+"#!/step3":(c.data.car={make:c.data.car.make,model:c.data.car.model,year:c.data.car.year},c.data.appointment={},g.set("data",c.data),c.data.car.make&&c.data.car.model&&c.data.car.year?window.location=c.config.funnelUrl+"#!/step2":window.location=c.config.funnelUrl+"#!/step1")},d.$on("funnel.returningVisitor.update",function(a,b){}),c.initMessage=function(){j.init(c),c.returningVisitor&&(c.valuationImage=sacConfig.apiUrl+"/funnel/valuationPrice?trackingKey="+c.data.car.trackingKey+"&carId="+c.data.car.id+"&optimalImageWidth=350")},c.notYourCarClicked=function(){window.location=c.config.funnelUrl+"#!/step1"}}]),app.controller("ValuationFormController",["$filter","$scope","$rootScope","$state","$timeout","localStorageService","$stateParams","$sce","Application","Funnel","blockUI",function(a,b,c,d,e,f,g,h,i,j,k){b.config={country:null,language:null},b.lang={},b.returningVisitor=!1,b.init=function(){i.init(b),j.getMakes(b.config.country,i.numberOfPopularItems).success(function(a){b.makes=a.items,a.mostPopular&&a.mostPopular.length&&(a.mostPopular.push({name:"-------------"}),Array.prototype.unshift.apply(b.makes,a.mostPopular))})},b.makeSelected=function(a){var c=f.get("data");c.car.id&&(c.car.make==b.data.car.make?b.returningVisitor=!0:b.returningVisitor=!1)},b.submit=function(){b.returningVisitor?window.location=b.config.funnelUrl+"#!/step3":(b.data.car={make:b.data.car.make},b.data.appointment={},f.set("data",b.data),window.location=b.config.funnelUrl+"#!/step1")}}]),app.factory("Application",["HTTP","localStorageService",function(a,b){return{config:sacConfig,apiUrl:sacConfig.apiUrl,isMobile:window.isMobile(),numberOfPopularItems:window.isMobile()?3:5,getLanguageTranslations:function(b){return a.send({method:"GET",url:this.apiUrl+"/language/translations",headers:{"Content-Type":"application/json"},cache:!0,params:{language:b}},"Loading, please wait ...")},lang:null,init:function(a){a.config=sacParams,this.lang?a.lang=this.lang:this.getLanguageTranslations(a.config.language).success(function(b){this.lang=b.items,a.lang=this.lang}),void 0!==sacParams.funnelUrl&&(a.config.funnelUrl=sacParams.funnelUrl),void 0!==sacParams.baseUrl&&(a.baseUrl=sacParams.baseUrl),a.preferences={},void 0!=sacParams.serviceHotline&&(a.preferences.serviceHotline=sacParams.serviceHotline),b.get("data")?a.data=b.get("data"):a.data={contact:{},car:{},appointment:{},marketing:{sellingReasons:{}}},a.showEmail=!0,"undefined"!=typeof sacParams.email&&(a.data.contact.email=sacParams.email,a.showEmail=!1),!a.data.car.id||a.data.appointment&&a.data.appointment.id&&void 0!==a.data.appointment.id||(a.returningVisitor=!0)}}}]),app.factory("Base64",function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(b){var c,d,e,f,g,h="",i="",j="",k=0;do c=b.charCodeAt(k++),d=b.charCodeAt(k++),i=b.charCodeAt(k++),e=c>>2,f=(3&c)<<4|d>>4,g=(15&d)<<2|i>>6,j=63&i,isNaN(d)?g=j=64:isNaN(i)&&(j=64),h=h+a.charAt(e)+a.charAt(f)+a.charAt(g)+a.charAt(j),c=d=i="",e=f=g=j="";while(k<b.length);return h},decode:function(b){var c,d,e,f,g,h="",i="",j="",k=0,l=/[^A-Za-z0-9\+\/\=]/g;l.exec(b)&&alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");do e=a.indexOf(b.charAt(k++)),f=a.indexOf(b.charAt(k++)),g=a.indexOf(b.charAt(k++)),j=a.indexOf(b.charAt(k++)),c=e<<2|f>>4,d=(15&f)<<4|g>>2,i=(3&g)<<6|j,h+=String.fromCharCode(c),64!=g&&(h+=String.fromCharCode(d)),64!=j&&(h+=String.fromCharCode(i)),c=d=i="",e=f=g=j="";while(k<b.length);return h}}}),app.factory("FakeWaitProgress",["$timeout","$rootScope",function(a,b){return{progress:0,run:function(c){var d=this;a(function(){d.progress<100?(d.progress=d.progress+(100-d.progress)/5,d.run(c),b.$broadcast("dialogs.wait.progress",{progress:d.progress})):(b.$broadcast("dialogs.wait.complete"),void 0!==c&&b.$broadcast(c),d.progress=0)},100)},complete:function(){this.progress=100,b.$broadcast("dialogs.wait.progress",{progress:self.progress}),b.$broadcast("dialogs.wait.complete")}}}]),app.factory("Funnel",["HTTP","Base64","localStorageService","$http","$window",function(a,b,c,d,e){return{config:sacConfig,apiUrl:sacConfig.apiUrl,getMakes:function(b,c){return a.send({method:"GET",url:this.apiUrl+"/cars/makes",cache:!0,headers:{"Content-Type":"application/json"},params:{country_id:b,mostPopular:c}},"Loading makes, please wait ...")},getModels:function(b,c,d){return a.send({method:"GET",url:this.apiUrl+"/cars/models",cache:!0,headers:{"Content-Type":"application/json"},params:{country_id:b,make_id:c,mostPopular:d}},"Loading models, please wait ...")},getYears:function(b,c,d){return a.send({method:"GET",url:this.apiUrl+"/funnel/years",cache:!0,headers:{"Content-Type":"application/json"},params:{country_id:b,make_id:c,model_id:d}},"Loading years, please wait ...")},getEngines:function(b,c,d,e,f,g){return a.send({method:"GET",url:this.apiUrl+"/cars/engines",headers:{"Content-Type":"application/json"},params:{make_id:b,model_id:c,year:d,body_id:e,country_id:f,language:g}},"Loading, please wait ...")},getDropdowns:function(b,c,d,e,f){return a.send({method:"GET",url:this.apiUrl+"/funnel/dropdowns",headers:{"Content-Type":"application/json"},params:{make:b,model:c,year:d,country:e,language:f}},"Loading, please wait ...")},getBranches:function(b,c){return a.send({method:"GET",url:this.apiUrl+"/branches",headers:{"Content-Type":"application/json"},cache:!0,params:{country_id:b,language:c}},"Loading branches, please wait ...")},getPrice:function(f,g,h,i){var j=b.encode(c.get("username")+":"+c.get("token"));return d.defaults.headers.common.Authorization="Basic "+j,a.send({method:"POST",url:this.apiUrl+"/funnel/valuate",headers:{"Content-Type":"application/json"},data:{car:f,contact:g,country:h,language:i,deviceHash:c.get("deviceHash"),resolution:e.screen?e.screen.width+"x"+e.screen.height:"NA"}},"Calculating your valuation price, please wait ...")},getDateRange:function(e,f){var g=b.encode(c.get("username")+":"+c.get("token"));return d.defaults.headers.common.Authorization="Basic "+g,a.send({method:"GET",url:this.apiUrl+"/funnel/dateRange",headers:{"Content-Type":"application/json"},params:{branch_id:e,language:f}},"Loading appointment date range, please wait ...")},getTimeRange:function(e,f,g){var h=b.encode(c.get("username")+":"+c.get("token"));return d.defaults.headers.common.Authorization="Basic "+h,
a.send({method:"GET",url:this.apiUrl+"/funnel/timeRange",headers:{"Content-Type":"application/json"},params:{branch_id:f,language:g,date:e}},"Loading available appointment times, please wait ...")},bookAppointment:function(e,f,g,h,i){var j=b.encode(c.get("username")+":"+c.get("token"));return d.defaults.headers.common.Authorization="Basic "+j,a.send({method:"POST",url:this.apiUrl+"/funnel/bookAppointment",headers:{"Content-Type":"application/json"},data:{car:f,contact:e,appointment:g,country:h,language:i}},"Reserving your appointment, please wait ...")},confirmAppointment:function(e,f,g,h,i){var j=b.encode(c.get("username")+":"+c.get("token"));return d.defaults.headers.common.Authorization="Basic "+j,a.send({method:"POST",url:this.apiUrl+"/funnel/confirmAppointment",headers:{"Content-Type":"application/json"},data:{appointmentId:e,trackingKey:f,verificationCode:g,country:h,language:i}},"Confirming your appointment, please wait ...")},getSellingReasons:function(e){var f=b.encode(c.get("username")+":"+c.get("token"));return d.defaults.headers.common.Authorization="Basic "+f,a.send({method:"GET",url:this.apiUrl+"/funnel/sellingReasons",headers:{"Content-Type":"application/json"},params:{language:e}},"Loading, please wait ...")},saveSellingReasons:function(e,f,g,h){var i=b.encode(c.get("username")+":"+c.get("token"));return d.defaults.headers.common.Authorization="Basic "+i,a.send({method:"POST",url:this.apiUrl+"/funnel/sellingReasons",headers:{"Content-Type":"application/json"},data:{sellingReasons:e,trackingKey:f,appointmentId:g,country:h}},"Saving, please wait ...")},getBranchInfo:function(e,f){var g=b.encode(c.get("username")+":"+c.get("token"));return d.defaults.headers.common.Authorization="Basic "+g,a.send({method:"GET",url:this.apiUrl+"/branch/info",headers:{"Content-Type":"application/json"},params:{branch_id:e,language:f}},"Loading branch information, please wait ...")},getAppointmentDetails:function(b,c,d,e){return a.send({method:"GET",url:this.apiUrl+"/funnel/appointment",headers:{"Content-Type":"application/json"},params:{appointmentId:b,trackingKey:c,language:e,country:d}},"Loading appointment information, please wait ...")},getValuationDetails:function(b,c,d,e){return a.send({method:"GET",url:this.apiUrl+"/funnel/valuation",headers:{"Content-Type":"application/json"},params:{carId:b,trackingKey:c,language:e,country:d}},"Loading valuation information, please wait ...")},saveSuggestedPrice:function(e,f,g){var h=b.encode(c.get("username")+":"+c.get("token"));return d.defaults.headers.common.Authorization="Basic "+h,a.send({method:"POST",url:this.apiUrl+"/funnel/suggestedPrice",headers:{"Content-Type":"application/json"},data:{carId:e,trackingKey:f,suggestedPrice:g}},"Saving, please wait ...")},getBookingInfo:function(e,f,g,h,i,j){var k=b.encode(c.get("username")+":"+c.get("token"));return d.defaults.headers.common.Authorization="Basic "+k,a.send({method:"GET",url:this.apiUrl+"/funnel/bookingInfo",headers:{"Content-Type":"application/json"},params:{language:f,country:e,make:g,model:h,year:i,carId:j}},"Loading booking information, please wait ...")},getEngineSpecs:function(b,c,d,e,f,g){return a.send({method:"GET",url:this.apiUrl+"/cars/engineSpecs",headers:{"Content-Type":"application/json"},params:{make_id:b,model_id:c,year:d,body:e,country_id:f,language:g}},"Loading, please wait ...")},getVehicles:function(b,c,d,e,f,g,h){return a.send({method:"GET",url:this.apiUrl+"/cars/vehicles",headers:{"Content-Type":"application/json"},params:{make_id:c,model_id:d,year:e,body:f,country_id:g,language:h,engine_specs_id:b,filter_by_vehicle_id:b,filter_by:"c_type_name,c_engine_power_value"}},"Loading, please wait ...")},getAppoointmentsBooked:function(){return a.send({method:"GET",url:this.apiUrl+"/funnel/appointmentsBooked",headers:{"Content-Type":"application/json"}},"Loading, please wait ...")},resendSMS:function(b,c,d,e){return a.send({method:"POST",url:this.apiUrl+"/funnel/resendSMS",headers:{"Content-Type":"application/json"},data:{carId:b,mobile:c,countryId:d,language:e}},"please wait ...")},getCountryCallingCodes:function(b){var b=b||"en";return a.send({method:"GET",url:this.apiUrl+"/terminal/countryCallingCodes",headers:{"Content-Type":"application/json"},params:{language:b}})},getSacSourcePixel:function(b,c){return a.send({method:"GET",url:this.apiUrl+"/funnel/sacSourcePixel",headers:{"Content-Type":"application/json"},params:{appointmentId:b,sacSource:c}})},sendPixelRequest:function(b){return a.send({method:"GET",url:b,headers:{"Content-Type":"application/json"}})},saveDeviceInfo:function(){return a.send({method:"POST",url:this.apiUrl+"/funnel/deviceInfo",headers:{"Content-Type":"application/json"},data:{deviceHash:c.get("deviceHash"),resolution:e.screen?e.screen.width+"x"+e.screen.height:"NA"}})}}}]),app.factory("GAObject",[function(){return{trackPage:function(a){"undefined"!=typeof _gaq&&_gaq.push(["_trackPageview",a]),"undefined"!=typeof ga&&ga("send","pageview",a)},completedValuation:function(a,b,c,d){"undefined"!=typeof _gaq&&(_gaq.push(["_setCustomVar",1,"Make",a,2]),_gaq.push(["_setCustomVar",2,"Model",b,2]),_gaq.push(["_setCustomVar",3,"Year",c,2]),_gaq.push(["_setCustomVar",4,"Model Type",d,2]),_gaq.push(["_trackEvent","Cars","Valuated"])),"undefined"!=typeof ga&&(ga("set","dimension1",a),ga("set","dimension2",b),ga("set","dimension3",c),ga("set","dimension4",d),ga("send","event",{eventCategory:"Cars",eventAction:"Valuated"}))},completedAppointment:function(a,b,c,d){"undefined"!=typeof _gaq&&(_gaq.push(["_setCustomVar",1,"Make",a,2]),_gaq.push(["_setCustomVar",2,"Model",b,2]),_gaq.push(["_setCustomVar",3,"Year",c,2]),_gaq.push(["_setCustomVar",4,"Model Type",d,2]),_gaq.push(["_trackEvent","Cars","Booked"])),"undefined"!=typeof ga&&(ga("set","dimension1",a),ga("set","dimension2",b),ga("set","dimension3",c),ga("set","dimension4",d),ga("send","event",{eventCategory:"Cars",eventAction:"Booked"}))}}}]),app.factory("HTTP",["$http","$timeout",function(a,b){var c=function(){return{successCallback:null,errorCallback:null,send:function(a,b,c,d){a.timeout=sacConfig.http_timeout;var e=b(a),f=this;return e.error(function(g,h,i,j){0==h?confirm("It seems there was a problem with your internet connection. Would you like to retry?")&&(e=f.send(a,b,c,d)):f.errorCallback&&f.errorCallback(g,h,i,j)}).success(function(a){f.successCallback&&f.successCallback(a)}),this}}};return{requestInstance:null,send:function(b,d,e){return"undefined"==typeof d&&(d="Loading, please wait ..."),"undefined"==typeof e&&(e=!0),this.requestInstance=new c,this.requestInstance.send(b,a,d,e),this},success:function(a){return this.requestInstance.successCallback=a,this},error:function(a){return this.requestInstance.errorCallback=a,this}}}]),void 0===sacParams&&(sacParams={}),sacParams.siteName="undefined"!=typeof sacParams.siteName?sacParams.siteName:"SellAnyCar.com",function(a,b){b?loadCSS(a+"/css/all_bootstrap.min.css"):loadCSS(a+"/css/all.min.css"),angular.element(document).ready(function(){var a=["funnelApp"];"undefined"!=typeof sacParams.additionalModules&&sacParams.additionalModules.constructor===Array&&Array.prototype.push.apply(a,sacParams.additionalModules),angular.bootstrap(document,a),void 0!==sacParams.callback&&sacParams.callback()})}(sacParams.baseUrl,sacParams.useBootstrap);